{"version":3,"file":"course_enrolment.min.js","sources":["../src/course_enrolment.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Responsible for:\n * creation of modals to change enrolment,\n * creation of date modal to update date for enrolment\n * performs ajax requests to enrol a banner section,\n * performs ajax requests to delete a banner enrolment\n * calls create and duplicate course library in event course has been used in a different semester\n *\n * @package    theme_urcourses_default\n * @author     Brooke Clary\n *\n */\n\ndefine(['jquery', 'core/ajax', 'core/notification', 'core/str',\n    'core/modal_factory', 'core/modal_events','theme_urcourses_default/course_actions'],\n    function($, ajax, notification, str, ModalFactory, ModalEvents,courseActionsLib) {\n\n    /** Container jquery object. */\n    var _root;\n    /** Course ID */\n    var _course;\n    var _element;\n    var _semester;\n    var _currentsem;\n    var _semesterdates;\n    var _categories;\n    var _templatelist;\n    var _homeurl;\n\n    /** Jquery selector strings. */\n    var SELECTORS = {\n        HEADER: '#page-header .header-body',\n        HEADER_TOP: \"#page-header .page-head\",\n        BTN_COURSEENROL: '#btn_courseenrol',\n        BTN_ENROLTERM: '.btn_enrolterm',\n        STARTHOLDER: '#course_tools_startholder',\n        ENDHOLDER: '#course_tools_endholder',\n        STARTDAY: '#course_tools_start_day',\n        STARTMONTH: '#course_tools_start_month',\n        STARTYEAR: '#course_tools_start_year',\n        STARTHOUR: '#course_tools_start_hour',\n        STARTMINUTE: '#course_tools_start_minute',\n        ENDDAY: '#course_tools_end_day',\n        ENDMONTH: '#course_tools_end_month',\n        ENDYEAR: '#course_tools_end_year',\n        ENDHOUR: '#course_tools_end_hour',\n        ENDMINUTE: '#course_tools_end_minute',\n        ENDENABLE: '#course_tools_enddate_enabled',\n        ERR_START: '#error_course_tools_start',\n        ERR_END: '#error_course_tools_end',\n    };\n    const TEMPLATES = {\n        MODAL_COURSE_ACTION_CONTENT: 'theme_urcourses_default/modal_course_action_date'\n    };\n\n    /**\n     * Initializes global variables.\n     * @param {string} root - Jquery selector for container.\n     * @param {int} headerstyle - selected header style.\n     * @param {int} courseid - ID of current course.\n     * @return void\n     */\n    var _setGlobals = function(root, course,semesterdates,categories,templatelist,homeurl, currentsem) {\n       _root = $(root);\n       _course = course;\n       _semesterdates = semesterdates;\n       _currentsem = currentsem;\n       _categories = categories;\n       _templatelist = templatelist;\n       _homeurl = homeurl;\n\n       //constructor for current course, incase of duplication, creation, or date modals being needed\n       courseActionsLib = new courseActionsLib(\n        _course.id,\n        _course.coursename,\n        _course.shortname,\n        _course.startdate,\n        _course.enddate,\n        _templatelist,\n        _categories);\n    };\n\n    /**\n     * Sets up event listeners.\n     * @return void\n     */\n    var _registerEventListeners = function() {\n        _root.on('click', SELECTORS.BTN_ENROLTERM, _getEnrolInfo);\n    };\n     /**\n     * Sets up event listeners.\n     * @return void\n     */\n    var _registerSelectorEventListeners = function() {\n        //set event listners for template options\n        $('.tmpl-label').bind('click', function() { _setActiveTemplate($(this)); } );\n    };\n    /**\n    * Switch choosen template based on click in template list\n    */\n   var _setActiveTemplate = function(e) {\n\n        //on click check if already active\n        if(e.hasClass(\"active\")){\n            //remove active class\n            e.removeClass(\"active\");\n            //and uncheck checkbox\n            e.find(\".fa-check-square-o\").addClass(\"fa-square-o\");\n            e.find(\".fa-square-o\").removeClass(\"fa-check-square-o\");\n        }else{\n            //add active class\n            e.addClass(\"active\");\n            //and check checkbox\n            e.find(\".fa-square-o\").addClass(\"fa-check-square-o\");\n            e.find(\".fa-check-square-o\").removeClass(\"fa-square-o\");\n        }\n    };\n\n    /**\n     * Sets up event listeners.\n     * @return void\n     */\n    var _registerDeleteButtons = function() {\n        //set event listners for template options\n        $('div[data-role=\"delete_button\"]').bind('click', function() { _deleteConfirmation($(this)); } );\n    };\n\n     /**\n     * Initiate ajax call to get enrollment info\n     * to create modal with choices\n     */\n    var _getEnrolInfo = function() {\n\n        _element = $(this);\n        _semester = _element.attr('id');\n\n        // return if required values aren't set\n        if (!_course.id) {\n            return;\n        }\n        // set args\n        var args = {\n            courseid: _course.id,\n            semester: _semester\n        };\n\n        // set ajax call\n        var ajaxCall = {\n            methodname: 'theme_urcourses_default_header_enrollment_info',\n            args: args\n        };\n\n        // initiate ajax call\n        var promise = ajax.call([ajaxCall]);\n        promise[0].done(function(response) {\n            _populateModal(response);\n        });\n    };\n\n    /**\n     * Handles ajax return and response to create modal with options\n     * @param {Object} response\n     */\n    var _populateModal = function(data) {\n\n        // create modal with current selection as header\n        var modaltitle = 'Modify enrolment for '+data.semester;\n        var activatedlist = \"\";\n        var activatedtitle = \"\";\n        var isavailable = data.isavaliable;\n\n        templatelist = '<div class=\"form-control-feedback invalid-feedback\" id=\"error_course_tools_section\">'\n                        +'</div> <div data-role=\"templateholder\" class = \"list-group\" >';\n        //check if any data exists\n        if(data.courseinfo.length !=0){\n            //special selecting box\n            $.each( data.courseinfo, function( key, value ) {\n                templatelist += '<div data-role = \"bannerselect\" class=\"tmpl-label '+\n                                ' list-group-item list-group-item-action \" id = '+value.crn+'>'+\n                                '<h6><i class=\"fa fa-square-o\" aria-hidden=\"true\"></i>  '+\n                                value.subject + ' ' +value.course + '-' + value.section +' ('+value.crn+')</h6>'+\n                                '</div>';\n            });\n            //add group division checkbox\n            templatelist += '<br><div class=\"form-check ml-3\">'\n                        +'<input class=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"course_tools_groups\">'\n                        +'<label class=\"form-check-label\" for=\"course_tools_groups\">'\n                        +'<h6> Create groups for each section </h6>'\n                        +' </label>'\n                        +' </div>';\n        }else{\n            // else not error message\n            //add default template option even if there is no template category\n            templatelist += '<div data-role = \"templateselect\" class=\"tmpl-label '+\n                'list-group-item list-group-item-action\" id = \"0\" >'+\n                '<p>There are no additional sections available at this time </p>'+\n                '</div>';\n        }\n\n        //For banner sections already enrolled in current semester\n        if(data.activated.length !=0){\n            activatedtitle = '<label class=\"col-form-label d-inline\"><b> Current enrolments:  </b></label></br>';\n            activatedlist += '<div class=\"list-group\">';\n            $.each( data.activated, function( key, value ) {\n                var linkedClass = \"alert-warning\";\n                if(value.linked){\n                    linkedClass = \"alert-success\";\n                }\n\n                if(value.linked != 1){\n                    activatedlist +='<div data-role=\"delete_button\" data-fullname =\"'+\n                                    value.fullname+'\" id=\"delete_'+value.crn+'_'+value.urid+\n                                    '\" class=\"list-group-item list-group-item-secondary enrollment-delete '+linkedClass+' \">'+\n                                    '<h6 class =\"ml-3 d-inline\">'+value.subject + ' ' +\n                                    value.course + '-' + value.section+' ('+value.crn+')'+\n                                    '<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\">'+\n                                    '<span aria-hidden=\"true\">&times;</span>'+\n                                    '</button></h6>'+\n                                    '</div>';\n                }else{\n                    activatedlist +='<div data-fullname =\"'+\n                        value.fullname+'\" id=\"delete_'+value.crn+'_'+value.urid+\n                        '\" class=\"list-group-item list-group-item-secondary enrollment-delete '+linkedClass+' \">'+\n                        '<h6 class =\"ml-3 d-inline\">'+value.subject + ' ' +\n                        value.course + '-' + value.section+' ('+value.crn+')'+\n                        '</h6>'+\n                        '</div>';\n                }\n            });\n                activatedlist += '</div><br>';\n        }\n        templatelist += '</div>';\n\n        //var inSemester = false; //change to true if want to block current semester enrollment\n       /* jQuery.each(_semesterdates, function(index, item) {\n            if(index == _semester){\n                starttemp = item.startdate.split(\"-\")\n                start = new Date(starttemp[2]+\"-\"+starttemp[1]+\"-\"+starttemp[0] );\n                var current = new Date();\n                if(current.getTime() < start.getTime() ){\n                    inSemester=false;\n                }\n            }\n        });*/\n        var pastSemester = false;\n        if(_semester < _currentsem){\n            pastSemester = true;\n        }\n\n        if(/*inSemester*/ pastSemester){\n            // create modal with current selection as header\n            var modaltitle = 'Modify enrolment';\n            var templatelist = '<div data-role = \"templateselect\" class=\"tmpl-label '+\n            'list-group-item list-group-item-action\" id = \"0\" >'+\n            '<p>This is a past semester. Enrolment can not be modified. </p>'+\n            '</div><br>';\n\n            //For banner sections already enrolled in current semester\n            if(data.activated.length !=0){\n                activatedlist = \"\";\n                activatedlist += '<div class=\"list-group\">';\n                $.each( data.activated, function( key, value ) {\n                    var linkedClass = \"alert-warning\";\n                    if(value.linked){\n                        linkedClass = \"alert-success\";\n                    }\n\n                    activatedlist +='<div class=\"list-group-item list-group-item-secondary '+linkedClass+' \">'+\n                                    '<h6 class =\"ml-3 d-inline\">'+value.subject + ' ' +value.course + '-' + value.section +'</h6>'+\n                                    '</div>';\n                    });\n                    activatedlist += '</div><br>';\n            }\n\n            //adding in confirmation modal in case buttons accidentally clicked\n            ModalFactory.create({\n                type: ModalFactory.types.CANCEL,\n                title: modaltitle,\n                body: templatelist+activatedtitle+activatedlist,\n            }).then(function(modal) {\n\n                modal.footer.prepend('<a type=\"button\" class=\"btn btn-primary justify-content-start mr-auto p-2\" href=\"'\n                                    +_homeurl+'/blocks/urcourserequest?semester='+_semester +'\">My enrolment overview</a>');\n                modal.show();\n            });\n        }else{\n            //adding in confirmation modal in case buttons accidentally clicked\n            ModalFactory.create({\n                type: (data.courseinfo.length != 0) ? ModalFactory.types.SAVE_CANCEL :ModalFactory.types.CANCEL,\n                title: modaltitle,\n                body: ((isavailable) ? '<label class=\"col-form-label d-inline\"><b> Available enrolments:  </b></label></br>'\n                        + templatelist\n                        +\"</br>\"\n                        + activatedtitle\n                        + activatedlist  : \"\"),\n            }).then(function(modal) {\n\n                modal.footer.prepend('<a type=\"button\" class=\"btn btn-primary justify-content-start mr-auto p-2\" href=\"'\n                                    +_homeurl+'/blocks/urcourserequest?semester='+_semester +'\">My enrolment overview</a>');\n\n                if(isavailable && data.courseinfo.length != 0){\n                    modal.setSaveButtonText('Save');\n                    var root = modal.getRoot();\n                    root.on(ModalEvents.cancel, function(){\n                        return;\n                    });\n\n                    root.on(ModalEvents.save, function(e){\n\n                        var templateHolder = $('div[data-role=\"templateholder\"');\n                        var selectedTemplates = $(templateHolder).find('.active');\n                        //no selected template error\n                        if(selectedTemplates.length <=0){\n                            e.preventDefault();\n                            $(\"#error_course_tools_section\").text(\"Please select a section\");\n                            $(\"#error_course_tools_section\").attr(\"display\", \"block\");\n                            $(\"#error_course_tools_section\").show();\n                        }else{\n                            var templateids = [];\n                            for(var i = 0; i<selectedTemplates.length; i++){\n                                templateids.push( {\"crn\": $(selectedTemplates[i]).attr('id')});\n                            }\n                            var groupcheck = $(\"#course_tools_groups\").prop(\"checked\");\n                            _addEnrolmentDateConfirm(data, templateids, groupcheck);\n                        }\n                    });\n                }else{\n                    var root = modal.getRoot();\n                    root.on(ModalEvents.cancel, function(){\n                        return;\n                    });\n                }\n                //remove modal on hide\n                root.on(ModalEvents.hidden, function(){\n                    //remove inputs otherwise duplicates are made causing id problems\n                    $( \"div[data-role='templateholder']\" ).remove();\n                });\n                modal.show();\n            }).done(function() {\n\n                if(isavailable){\n                    if(data.courseinfo.length>0 ){\n                        _registerSelectorEventListeners(_element);\n                    }else{\n                        $('button[data-action=\"cancel\"]').text(\"Close\");\n                    }\n                }\n                if(data.activated.length !=0){\n                    _registerDeleteButtons();\n                }\n            });\n        }\n    };\n\n    /**\n     * Handles ajax return and response to create modal with options\n     * @param {Object} response\n     */\n    var _addEnrolmentDateConfirm = async function(data, templateids,groupcheck) {\n\n\n        var nextyear = (new Date()).getFullYear()+1;\n        var newstart = (new Date()).getMonth()+' '+(new Date()).getDate()+', '+(new Date()).getFullYear();\n        var newend = (new Date()).getMonth()+' '+(new Date()).getDate()+', '+nextyear;\n        var formatednewstart =\"\";\n\n        $.each(_semesterdates, function(index, item) {\n            if(index == _semester){\n                var starttemp = item.startdate.split(\"-\");\n                var endtemp = item.enddate.split(\"-\");\n\n                newstart = parseInt(starttemp[1],10)+\" \"+starttemp[0]+\", \" +starttemp[2];\n                newend = parseInt(endtemp[1],10)+\" \"+endtemp[0]+\", \" +endtemp[2];\n                var d = new Date(starttemp[2],starttemp[1]-1,starttemp[0]);\n                formatednewstart = d.toLocaleString('default', { month: 'short' })+\" \"+starttemp[0]+\", \" +starttemp[2];\n            }\n        });\n\n        var startdate = _course.startdate.mon+' '+_course.startdate.mday+\", \"+_course.startdate.year;\n        var enddate = _course.enddate.mon+' '+_course.enddate.mday+\", \"+_course.enddate.year;\n\n        if( startdate == newstart && enddate == newend){\n            _addEnrolment(templateids,groupcheck,true);\n        }else{\n\n            // create modal with current selection as header\n            var modaltitle = 'Would you like to change course dates?';\n            var template =  await self.render(TEMPLATES.MODAL_COURSE_ACTION_CONTENT);\n            var startdate = _course.startdate.month+' '+_course.startdate.mday+\", \"+_course.startdate.year;\n            var enddate = _course.enddate.month+' '+_course.enddate.mday+\", \"+_course.enddate.year;\n\n            //adding in confirmation modal in case buttons accidentally clicked\n            ModalFactory.create({\n                type: ModalFactory.types.SAVE_CANCEL,\n                title: modaltitle,\n                body: (\"<p><b>Current Course Dates:<br/></b><div class='alert alert-warning' role='alert'>\"\n                        +((_course.enddate.year < _course.startdate.year) ? \"Start Date: \"+startdate+\n                            \"<br> End Date: No endate set\" :startdate+ \" until \"+enddate)\n                        +\"</div>\"\n                        +((formatednewstart==\"\") ? \"\":\"The \"+data.semester+\" term will begin \"+formatednewstart+\"<br/><br/>\")\n                        +template ),\n                backdrop: 'static',\n                keyboard: false,\n                dismissible:false\n\n            }).then(function(modal) {\n\n                modal.setSaveButtonText('Update');\n\n                var root = modal.getRoot();\n                root.on(ModalEvents.cancel, function(){\n                    _addEnrolment(templateids,groupcheck,true);\n                });\n\n                root.on(ModalEvents.save, function(e){\n                    if(!validate()){\n                        e.preventDefault();\n                    }else{\n                        _addEnrolment(templateids,groupcheck, false);\n                    }\n                });\n\n                modal.show();\n\n                var modaltemp = modal.modal;\n                $(modaltemp).find(\".close\").attr(\"id\",\"closemodal\");\n                $(\"#closemodal\").bind('click', function() { _closeDateConfirm($(this), modal); } );\n                $(modaltemp).find(\".close\").addClass( \"dateconfirm\" );\n                $(root).click(function(e) {\n                    if(!$(e.target).is(\"button\") && !$(e.target).parent().is(\"button\")){\n                        e.preventDefault();\n                        modal.show();\n                    }else{\n                        $( SELECTORS.ENDHOLDER).remove();\n                        $( SELECTORS.STARTHOLDER).remove();\n                        $( SELECTORS.ERR_START).remove();\n                        $( SELECTORS.ERR_END).remove();\n                        modal.hide();\n                    }\n                });\n            }).done(function() {\n\n                var startdatefill = {\"year\": (new Date()).getFullYear(),\n                                    \"mon\": (new Date()).getMonth(),\"mday\":(new Date()).getDate()};\n                var enddatefill = {\"year\": (new Date()).getFullYear() +1,\n                                    \"mon\": (new Date()).getMonth(),\"mday\":(new Date()).getDate()};\n\n                $.each(_semesterdates, function(index, item) {\n                    if(index == _semester){\n                        var starttemp = item.startdate.split(\"-\");\n                        var endtemp = item.enddate.split(\"-\");\n\n                        startdatefill = {\"year\": starttemp[2], \"mon\": starttemp[1],\"mday\":starttemp[0]};\n                        enddatefill = {\"year\": endtemp[2], \"mon\": endtemp[1],\"mday\":endtemp[0]};\n                    }\n                });\n\n                $('button[data-action=\"cancel\"]').text(\"Continue without updating\");\n                //add numbers to date selectors\n                courseActionsLib.populateDateSelects(startdatefill,enddatefill);\n                courseActionsLib.registerDateEventListeners(_element);\n\n            });\n        }\n    };\n\n    var _closeDateConfirm = function(e, modal){\n\n        $( SELECTORS.ENDHOLDER).remove();\n        $( SELECTORS.STARTHOLDER).remove();\n        $( SELECTORS.ERR_START).remove();\n        $( SELECTORS.ERR_END).remove();\n        modal.hide();\n    };\n    /**\n     * For Enrolemnt date selectors\n     * Check if dates are valid\n     * Return bool\n     */\n    var validate = function() {\n\n        var startday = $(SELECTORS.STARTDAY).val();\n        var startmonth = $(SELECTORS.STARTMONTH).val();\n        var startyear = $(SELECTORS.STARTYEAR).val();\n        var endyear = $(SELECTORS.ENDYEAR).val();\n        var endday = $(SELECTORS.ENDDAY).val();\n        var endmonth = $(SELECTORS.ENDMONTH).val();\n        var test =true;\n        var startdate = new Date(startyear+\".\"+startmonth+\".\"+startday).getTime()/1000;\n        var enddate = new Date(endyear+\".\"+endmonth+\".\"+endday).getTime()/1000;\n\n        if(enddate < startdate && $(SELECTORS.ENDENABLE).is(\":checked\") ){\n            $(SELECTORS.ERR_START).text(\"Course end date can not be before start date\");\n            $(SELECTORS.ERR_START).attr(\"display\", \"block\");\n            $(SELECTORS.ERR_START).show();\n            test = false;\n        }else{\n            $(SELECTORS.ERR_START).text(\"\");\n            $(SELECTORS.ERR_END).text(\"\");\n        }\n\n        return test;\n    };\n\n    /**\n     * After modal info has been entered call ajax request\n     */\n    var _addEnrolment = function(templateids, groupcheck, isoriginal) {\n\n        // return if required values aren't set\n        if (!_course.id) {\n            return;\n        }\n\n        if(isoriginal){\n            var startdate = _course.startdate.mday+\"-\"+_course.startdate.mon\n                            +\"-\"+_course.startdate.year+\"-\"+_course.startdate.hours+\"-\"+_course.startdate.minutes;\n            var enddate = _course.enddate.mday+\"-\"+_course.enddate.mon+\"-\"\n                            +_course.enddate.year+\"-\"+_course.enddate.hours+\"-\"+_course.enddate.minutes;\n        }else{\n            var startday = $(SELECTORS.STARTDAY).val();\n            var startmonth = $(SELECTORS.STARTMONTH).val();\n            var startyear = $(SELECTORS.STARTYEAR).val();\n            var starthour = $(SELECTORS.STARTHOUR).val();\n            var startminute = $(SELECTORS.STARTMINUTE).val();\n            var startdate = startday+\"-\"+startmonth+\"-\"+startyear+\"-\"+starthour+\"-\"+startminute;\n\n            var enddate = \"0\";\n            if($(SELECTORS.ENDENABLE).is(\":checked\") ){\n                var endday = $(SELECTORS.ENDDAY).val();\n                var endmonth= $(SELECTORS.ENDMONTH).val();\n                var endyear = $(SELECTORS.ENDYEAR).val();\n                var endhour = $(SELECTORS.ENDHOUR).val();\n                var endminute = $(SELECTORS.ENDMINUTE).val();\n                enddate = endday+\"-\"+endmonth+\"-\"+endyear+\"-\"+endhour+\"-\"+endminute;\n            }\n        }\n        if(groupcheck == \"\" || groupcheck == false){\n            groupcheck = 0;\n        }else{\n            groupcheck = 1;\n        }\n\n        // set args\n        var args = {\n            courseid: _course.id,\n            semester: _semester,\n            crns: templateids,\n            groupcheck: groupcheck,\n            startdate: startdate,\n            enddate: enddate,\n            isoriginal: isoriginal,\n        };\n\n        // set ajax call\n        var ajaxCall = {\n            methodname: 'theme_urcourses_default_header_activate_course',\n            args: args,\n            fail: notification.exception\n        };\n\n        // initiate ajax call\n        var promise = ajax.call([ajaxCall]);\n        promise[0].done(function(response) {\n\n            var title= \"ERROR:\";\n            var info = '<div class=\"alert alert-warning\" role=\"alert\">'+response.result+'<br></div>';\n            if(response.value!=\"\"){\n                title = \"Enrolment assigned successfully\";\n                info = '<div class=\"alert alert-success\" role=\"alert\">'+response.result+'<br></div>';\n            }\n\n            ModalFactory.create({\n                type: ModalFactory.types.CANCEL,\n                title: title,\n                body: info,\n            }).then(function(modal) {\n                modal.show();\n                var root = modal.getRoot();\n                $('button[data-action=\"cancel\"]').text(\"Close\");\n                 //remove modal on hide\n                 root.on(ModalEvents.hidden, function(){\n                    location.reload();\n                 });\n            });\n        });\n    };\n\n     /**\n     * If delete button has been clicked for an\n     * activated banner enrollment, call an ajax\n     * request to remove the selected enrolment\n     */\n    var _deleteConfirmation = function(element) {\n\n        var fullname = element.data( \"fullname\" );\n\n        ModalFactory.create({\n            type: ModalFactory.types.SAVE_CANCEL,\n            title: \"Delete Enrolment\",\n            body: \"<p><b>Are you sure you want to delete enrolment for \"+fullname+\"?</b><br />\",\n        }).then(function(modal) {\n\n            modal.setSaveButtonText('Delete');\n            var root = modal.getRoot();\n            root.on(ModalEvents.cancel, function(){\n                return;\n            });\n            root.on(ModalEvents.save, function(){\n                _deleteEnrollment(element);\n            });\n            modal.show();\n        });\n    };\n\n    /**\n     * If delete button has been clicked for an\n     * activated banner enrollment, call an ajax\n     * request to remove the selected enrolment\n     */\n    var _deleteEnrollment = function(e) {\n\n        var crn = e.attr('id').split(\"_\");\n\n        // set args\n        var args = {\n            courseid:crn[2],\n            semester: _semester,\n            crn: crn[1],\n        };\n\n        // set ajax call\n        var ajaxCall = {\n            methodname: 'theme_urcourses_default_header_delete_enrollment',\n            args: args,\n            fail: notification.exception\n        };\n\n        // initiate ajax call\n        var promise = ajax.call([ajaxCall]);\n        promise[0].done(function(response) {\n            //close previous modal\n            $( 'button[data-action=\"cancel\"] ').trigger( \"click\" );\n\n            var title= \"ERROR:\";\n            var info = '<div class=\"alert alert-warning\" role=\"alert\">'+response.result+'<br></div>';\n            if(response.result!=\"\"){\n                title = \"Successfully Removed Enrolment\";\n                info = '<div class=\"alert alert-success\" role=\"alert\">'+response.result+'<br></div>';\n            }\n\n            ModalFactory.create({\n                type: ModalFactory.types.CANCEL,\n                title: title,\n                body: info,\n            }).then(function(modal) {\n                modal.show();\n                var root = modal.getRoot();\n                //remove modal on hide\n                root.on(ModalEvents.hidden, function(){\n                    location.reload();\n                 });\n                $('button[data-action=\"cancel\"]').text(\"Close\");\n            });\n        });\n    };\n\n    /**\n     * Use passed course dates to find out current\n     * semester\n     */\n    var _semesterDateObject = function(item) {\n\n        var temp = item.split(\"-\");\n        return new Date(temp[2]+\"-\"+temp[1]+\"-\"+temp[0]);\n    };\n\n    /**\n     * Use passed course dates to find out current\n     * semester\n     */\n    var _getCurrentSem = function(semesterdates) {\n\n        var current = new Date();\n        var cterm = \"\";\n        $.each(semesterdates, function(index, item) {\n\n            var start =_semesterDateObject(item.startdate);\n            var end =_semesterDateObject(item.enddate);\n\n            if(current >= start && current <= end){\n                cterm = index;\n                return index;\n            }\n        });\n        return cterm;\n    };\n    /**\n     * Entry point to module. Sets globals and registers event listeners.\n     * @param {String} root Jquery selector for container.\n     * @return void\n     */\n    var init = function(root, course, semesterdates,categories, templatelist, homeurl) {\n        var currentsem = _getCurrentSem(semesterdates);\n        _setGlobals(root, course, semesterdates,categories,templatelist, homeurl,currentsem);\n        _registerEventListeners();\n    };\n\n    return {\n        init: init\n    };\n});"],"names":["define","$","ajax","notification","str","ModalFactory","ModalEvents","courseActionsLib","_root","_course","_element","_semester","_currentsem","_semesterdates","_categories","_templatelist","_homeurl","_ref","SELECTORS","TEMPLATES","_setActiveTemplate","e","hasClass","removeClass","find","addClass","_getEnrolInfo","this","attr","id","ajaxCall","methodname","args","courseid","semester","call","done","response","_populateModal","data","modaltitle","activatedlist","activatedtitle","isavailable","isavaliable","templatelist","courseinfo","length","each","key","value","crn","subject","course","section","activated","linkedClass","linked","fullname","urid","pastSemester","create","type","types","CANCEL","title","body","then","modal","footer","prepend","show","SAVE_CANCEL","root","setSaveButtonText","getRoot","on","cancel","save","templateHolder","selectedTemplates","preventDefault","text","templateids","i","push","groupcheck","prop","_addEnrolmentDateConfirm","hidden","remove","bind","_deleteConfirmation","regeneratorRuntime","mark","nextyear","newstart","newend","formatednewstart","startdate","enddate","template","wrap","_context","prev","next","Date","getFullYear","getMonth","getDate","index","item","starttemp","split","endtemp","parseInt","d","toLocaleString","month","mon","mday","year","_addEnrolment","self","render","sent","backdrop","keyboard","dismissible","validate","modaltemp","_closeDateConfirm","click","target","is","parent","hide","startdatefill","enddatefill","populateDateSelects","registerDateEventListeners","stop","_callee","_x","_x2","_x3","apply","arguments","startday","val","startmonth","startyear","endyear","endday","endmonth","test","getTime","isoriginal","hours","minutes","crns","fail","exception","info","result","location","reload","element","_deleteEnrollment","trigger","_semesterDateObject","temp","init","semesterdates","categories","homeurl","currentsem","current","cterm","start","end","_getCurrentSem","coursename","shortname","_setGlobals"],"mappings":"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"}