{"version":3,"sources":["../src/modal_help.js"],"names":["SELECTORS","SEARCH","SEARCH_BUTTON","SEARCH_CLEAR","SUGGESTIONS","SUGGESTION_ITEM","SEARCH_RESULT","BREADCRUMBS","BREADCRUMB","BREADCRUMB_SEARCH","BREADCRUMB_HOME","BREADCRUMB_PAGE","GUIDE_PAGE_LINK","OVERLAY_LOADING","BACK","BACK_TO_TOP","MAIN","TEMPLATES","MODAL_HELP_GUIDE_PAGE","MODAL_HELP_SEARCH_RESULTS","MODAL_HELP_LINKS_PAGE","ModalHelp","root","contextId","topicList","topicTitles","searchBox","modal","find","searchButton","searchClear","suggestionBox","content","suggestionItemIndex","currentPath","history","landingPageUrl","userIsInstructor","localUrl","Promise","all","getTopicList","ModalHelpAjax","getLandingPageUrl","map","topic","title","FuzzySearch","setDictionary","initEvents","Notification","exception","on","val","showSearchClear","hideSearchClear","updateSuggestions","clearSearch","getRoot","e","target","hideSuggestionBox","keyCode","KeyCodes","arrowUp","arrowLeft","preventDefault","getSuggestionItems","length","eq","focus","arrowDown","arrowRight","ModalEvents","shown","renderGuidePage","url","hidden","resetModal","CustomEvents","events","activate","suggestion","topicTitle","attr","topicTitleLower","toLowerCase","replace","query","searchGuides","enter","getModal","href","currentTarget","startsWith","endsWith","substring","lastIndexOf","window","open","split","path","hrefPath","actualPath","node","pop","push","join","breadcrumb","scroll","scrollTop","fadeIn","fadeOut","animate","getTopicListUrl","instructor","getJsonData","topicListJson","topics","jsondata","page_data","all_pages","topicsSorted","sort","a","b","prefix","filter","suggestions","search","suggestionList","getSuggestions","html","append","showSuggestionBox","setLoading","getSearchUrl","searchUrl","basePath","baseUrl","searchResults","breadcrumbs","active","name","renderReplace","results","getBody","page","frontmatter","unshift","breadcrumbUrl","breadcrumbPage","guidesBase","replaceAll","back","header","renderAppend","isinstructor","anchor","scrollIntoView","fetch","response","json","loading","visible","remove","template","data","area","Templates","render","then","js","replaceNodeContents","appendNodeContents","removeClass","addClass","Modal","registered","ModalRegistry","register","getType"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Theme Boost Campus - ModalHelp class\n *\n * @package    theme_urcourses_default\n * @author     John Lane\n *\n */\n\nimport $ from 'jquery';\nimport Notification from 'core/notification';\nimport Templates from 'core/templates';\nimport CustomEvents from 'core/custom_interaction_events';\nimport KeyCodes from 'core/key_codes';\nimport Modal from 'core/modal';\nimport ModalEvents from 'core/modal_events';\nimport ModalRegistry from 'core/modal_registry';\nimport ModalHelpAjax from 'theme_urcourses_default/modal_help_ajax';\nimport FuzzySearch from 'theme_urcourses_default/fuzzysearch';\n\nconst SELECTORS = {\n    SEARCH: '#modal_help_search',\n    SEARCH_BUTTON: '#modal_help_search_btn',\n    SEARCH_CLEAR: '#modal_help_search_clear',\n    SUGGESTIONS: '#modal_help_search_suggestions',\n    SUGGESTION_ITEM: '.modal-help-suggestion-item',\n    SEARCH_RESULT: '.modal-help-search-result',\n    BREADCRUMBS: '#breadcrumbs',\n    BREADCRUMB: '.breadcrumb-item a',\n    BREADCRUMB_SEARCH: '#breadcrumb_search',\n    BREADCRUMB_HOME: '#breadcrumb_home',\n    BREADCRUMB_PAGE: '#breadcrumb_page',\n    GUIDE_PAGE_LINK: '[data-region=\"guide-page-content\"] a',\n    OVERLAY_LOADING: '.overlay-icon-container',\n    BACK: '[data-action=\"go-back\"]',\n    BACK_TO_TOP: '#modal-help-back-to-top',\n    MAIN: '[data-region=\"modal-help-main\"]'\n};\n\nconst TEMPLATES = {\n    MODAL_HELP_GUIDE_PAGE: 'theme_urcourses_default/modal_help_guide_page',\n    MODAL_HELP_SEARCH_RESULTS: 'theme_urcourses_default/modal_help_search_results',\n    MODAL_HELP_LINKS_PAGE: 'theme_urcourses_default/modal_help_links',\n    OVERLAY_LOADING: 'core/overlay_loading'\n};\n\n/**\n * UR Courses help modal.\n * \n * @class ModalHelp\n * @property {Number} contextId Context ID number.\n * @property {Array} topicList Array of help topics.\n * @property {Array} topicTitles Titles of help topics.\n * @property {Object} searchBox Search input.\n * @property {Object} searchButton Search submit.\n * @property {Object} searchClear Clears search value.\n * @property {Object} suggestionBox Predictive search suggestion list.\n * @property {Object} suggestionItemIndex suggestionBox item index.\n */\nexport default class ModalHelp extends Modal {\n\n    constructor(root) {\n        super(root);\n        this.contextId = null;\n        this.topicList = null;\n        this.topicTitles = null;\n        this.searchBox = this.modal.find(SELECTORS.SEARCH);\n        this.searchButton = this.modal.find(SELECTORS.SEARCH_BUTTON);\n        this.searchClear = this.modal.find(SELECTORS.SEARCH_CLEAR);\n        this.suggestionBox = this.modal.find(SELECTORS.SUGGESTIONS);\n        this.content = this.modal.find(SELECTORS.MAIN);\n        this.suggestionItemIndex = 0;\n        this.currentPath = '';\n        this.history = [];\n        this.landingPageUrl = '';\n        this.userIsInstructor = null;\n    }\n\n    /**\n     * Setup for topic list, home page, and events.\n     *\n     * @param {Number} contextId Context ID number.\n     * @param {String} localUrl The local path relative to the site root.\n     */\n    async init(contextId, localUrl) {\n        try {\n            this.contextId = contextId;\n            [this.topicList, this.landingPageUrl, this.userIsInstructor] = await Promise.all([\n                this.getTopicList(),\n                ModalHelpAjax.getLandingPageUrl(this.contextId, localUrl),\n                ModalHelpAjax.userIsInstructor()\n            ]);\n            this.topicTitles = this.topicList.map(topic => topic.title);\n            FuzzySearch.setDictionary(this.topicTitles);\n            this.initEvents();\n        } catch (error) {\n            Notification.exception(error);\n        }\n    }\n\n    /**\n     * Registers event listeners.\n     */\n    initEvents() {\n\n        // PREDICTIVE SEARCH EVENTS //\n\n        /** Update suggestion list based on input. */\n        this.searchBox.on('input', () => {\n            if (this.searchBox.val()) {\n                this.showSearchClear();\n            } else {\n                this.hideSearchClear();\n            }\n            this.updateSuggestions();\n        });\n\n        /** Show suggestion list when search box is in focus. */\n        this.searchBox.on('focus', () => {\n            this.updateSuggestions();\n        });\n\n        /** Clear search value if search clear button is clicked. */\n        this.searchClear.on('click', () => {\n            this.clearSearch();\n        });\n\n        /** Hide suggestions if user clicks away from search box. */\n        this.getRoot().on('click', (e) => {\n            if (e.target !== this.searchBox[0] && e.target !== this.suggestionBox[0]) {\n                this.hideSuggestionBox();\n            }\n        });\n\n        /** If user presses up or down while focused on search, focus on suggestions. */\n        this.searchBox.on('keydown', (e) => {\n            if (e.keyCode === KeyCodes.arrowUp || e.keyCode === KeyCodes.arrowLeft) {\n                e.preventDefault();\n                this.suggestionItemIndex = this.getSuggestionItems().length - 0;\n                this.getSuggestionItems().eq(this.suggestionItemIndex).focus();\n            }\n            else if (e.keyCode === KeyCodes.arrowDown || e.keyCode === KeyCodes.arrowRight) {\n                e.preventDefault();\n                this.suggestionItemIndex = -1;\n                this.getSuggestionItems().eq(this.suggestionItemIndex).focus();\n            }\n        });\n\n        /** If user is focused on suggestions, cycle through list. */\n        this.suggestionBox.on('keydown', SELECTORS.SUGGESTION_ITEM, (e) => {\n            if (e.keyCode === KeyCodes.arrowUp || e.keyCode === KeyCodes.arrowLeft) {\n                e.preventDefault();\n                this.suggestionItemIndex--;\n                if (this.suggestionItemIndex < -1) {\n                    this.suggestionItemIndex = this.getSuggestionItems().length - 0;\n                }\n                this.getSuggestionItems().eq(this.suggestionItemIndex).focus();\n            }\n            else if (e.keyCode === KeyCodes.arrowDown || e.keyCode === KeyCodes.arrowRight) {\n                e.preventDefault();\n                this.suggestionItemIndex++;\n                if (this.suggestionItemIndex >= this.getSuggestionItems().length) {\n                    this.suggestionItemIndex = -1;\n                }\n                this.getSuggestionItems().eq(this.suggestionItemIndex).focus();\n            }\n        });\n\n        // GUIDE PAGE EVENTS //\n\n        /** Show home page when modal is open. */\n        this.getRoot().on(ModalEvents.shown, () => {\n            this.renderGuidePage(this.landingPageUrl.url, this.landingPageUrl.target);\n        });\n\n        /** Reset modal to default when closed. */\n        this.getRoot().on(ModalEvents.hidden, () => {\n            this.resetModal();\n        });\n\n        /** Open suggestion page if user clicks or presses enter. */\n        this.suggestionBox.on(CustomEvents.events.activate, SELECTORS.SUGGESTION_ITEM, (e) => {\n            const suggestion = $(e.target);\n            const topicTitle = suggestion.attr('data-value');\n            const topicTitleLower = topicTitle.toLowerCase().replace(/&/g, '&amp;');\n            const topic = this.topicList.find(topic => topic.title.toLowerCase() === topicTitleLower);\n            const url = `${topic.url}.json`;\n            this.searchBox.val(topicTitle);\n            this.showSearchClear();\n            this.renderGuidePage(url);\n        });\n\n        /** Search on click. */\n        this.searchButton.on('click', () => {\n            const query = this.searchBox.val();\n            this.searchGuides(query);\n            this.hideSuggestionBox();\n        });\n\n        /** Search on enter. */\n        this.searchBox.on('keydown', (e) => {\n            if (e.keyCode === KeyCodes.enter) {\n                const query = this.searchBox.val();\n                this.searchGuides(query);\n                this.getModal().focus();\n                this.hideSuggestionBox();\n            }\n        });\n\n        /** Open search result. */\n        this.getModal().on(CustomEvents.events.activate, SELECTORS.SEARCH_RESULT, (e) => {\n            const url = $(e.target).attr('data-url');\n            this.renderGuidePage(`${url}.json`);\n        });\n\n        /** If the user clicks a link inside the guide page, open the page. */\n        this.getRoot().on('click', SELECTORS.GUIDE_PAGE_LINK, (e) => {\n            let href = $(e.currentTarget).attr('href');\n            if (href.startsWith('#') ) return;\n            if (href.endsWith('/')) href = href.substring(0, href.lastIndexOf('/'));\n            e.preventDefault();\n            if (href.startsWith('http') || href.startsWith('https') || href.startsWith('mailto')) {\n                window.open(href, '_blank');\n            } else {\n                const [path, target] = href.split('#');\n                const hrefPath = path.split('/');\n                const actualPath = this.currentPath.split('/');\n                for (const node of hrefPath) {\n                    if (node === '..') actualPath.pop();\n                    else if (node !== '.') actualPath.push(node);\n                }\n                const url = actualPath.join('/');\n                this.renderGuidePage(`${url}.json`, target);\n            }\n        });\n\n        this.getModal().on('click', SELECTORS.BREADCRUMB, (e) => {\n            e.preventDefault();\n            const breadcrumb = $(e.currentTarget);\n            const url = breadcrumb.attr('href');\n            const target = breadcrumb.attr('data-target');\n            this.renderGuidePage(url, target);\n        });\n\n        this.getModal().on('click', SELECTORS.BACK, (e) => {\n            e.preventDefault();\n            if (this.history.length > 1) {\n                this.history.pop();\n                const [url, target] = this.history.pop();\n                this.renderGuidePage(url, target);\n            }\n        });\n\n        $(this.getModal()).find(\".modal-body\").scroll(function () {\n            if ($(this).scrollTop() > 50) {\n                $(SELECTORS.BACK_TO_TOP).fadeIn();\n            } else {\n                $(SELECTORS.BACK_TO_TOP).fadeOut();\n            }\n        });\n\n        this.getModal().on('click', SELECTORS.BACK_TO_TOP, (e) => {\n             $(this.getModal()).find(\".modal-body\").animate({\n                        scrollTop: 0\n                }, 400);\n                    return false;\n        });\n    }\n    /**\n     * Get list of help topics.\n     * @return {Array} Array of topics.\n     */\n    async getTopicList() {\n        const {instructor, url} = await ModalHelpAjax.getTopicListUrl(this.contextId);\n        const topicListJson = await this.getJsonData(url);\n        const topics = topicListJson.jsondata.page_data[0].all_pages;\n        const topicsSorted = topics.sort((a, b) => a.title > b.title);\n        const prefix = instructor ? 'Instructor' : 'Students';\n        return topicsSorted.filter(topic => topic.prefix === prefix);\n    }\n\n    /**\n     * Updates the suggestion list based on whatever is in the search box.\n     */\n    updateSuggestions() {\n        const query = this.searchBox.val();\n        let suggestions = FuzzySearch.search(query);\n        if (!suggestions.length) {\n            suggestions = this.topicTitles;\n        }\n        const suggestionList = this.getSuggestions(suggestions);\n        this.suggestionBox.html('');\n        this.suggestionBox.append(suggestionList);\n        this.showSuggestionBox();\n    }\n\n    /**\n     * Returns html markup based on list of suggested words.\n     * @param {Array} suggestions - List of suggested words.\n     * @returns {Array} An array of html tags.\n     */\n    getSuggestions(suggestions) {\n        return suggestions.map(suggestion => `<a href=\"#\" class=\"modal-help-suggestion-item\"\n                                              data-value=\"${suggestion}\">${suggestion}</a>`);\n    }\n\n    /**\n     * Searches the guides and displays results.\n     * @param {String} query\n     */\n    async searchGuides(query) {\n        if (!query) return;\n        try {\n            await this.setLoading(true);\n            const searchUrl = await ModalHelpAjax.getSearchUrl(this.contextId, query);\n            const basePath = searchUrl.split('/');\n            basePath.pop();\n            basePath.pop();\n            const baseUrl = basePath.join('/');\n            const searchResults = await this.getJsonData(searchUrl);\n            const breadcrumbs = [\n                {\n                    active: false,\n                    name: this.userIsInstructor ? 'Instructor Guide' : 'Student Guides',\n                    url: this.userIsInstructor ? `${baseUrl}/instructor.json` : `${baseUrl}/student.json`,\n                    target: ''\n                },\n                {\n                    active: true,\n                    name: `Search Results: ${query}`,\n                    url: '',\n                    target: '',\n                }\n            ];\n            await this.renderReplace(TEMPLATES.MODAL_HELP_SEARCH_RESULTS, {results: searchResults.jsondata, query: query, breadcrumbs: breadcrumbs}, this.content);\n            this.getBody()[0].scrollTop = 0;\n            \n            this.history.push([searchUrl]);\n        } catch (error) {\n            Notification.exception(error);\n        } finally {\n            this.setLoading(false);\n        }\n    }\n\n    /**\n     * Load content from the url into the modal. Scroll to target if one is provided.\n     * @param {String} url Url to fetch from.\n     * @param {String} target Anchor to scroll to when url is loaded.\n     */\n    async renderGuidePage(url, target = '') {\n\n        try {\n            await this.setLoading(true);\n            const page = await this.getJsonData(url);\n            const breadcrumbs = [];\n            const {content, frontmatter, jsondata} = page;\n            const {title} = frontmatter ? frontmatter : jsondata.page_data[0];\n            const path = url.split('/');\n\n            breadcrumbs.unshift({\n                active: true,\n                name: title,\n                target: target,\n                url: url,\n            });\n            path.pop();\n            while (path[path.length - 1] !== 'guides') {\n                const breadcrumbUrl = `${path.join('/')}.json`;\n                const breadcrumbPage = await this.getJsonData(breadcrumbUrl);\n                const {frontmatter, jsondata} = breadcrumbPage;\n                const {title} = frontmatter ? frontmatter : jsondata.page_data[0];\n                breadcrumbs.unshift({\n                    active: false,\n                    name: title,\n                    url: breadcrumbUrl\n                });\n                path.pop();\n            }\n            const guidesBase = path.join('/');\n\n            if (this.userIsInstructor && breadcrumbs[0].name !== 'Instructor Guide') {\n                breadcrumbs.unshift({\n                    active: false,\n                    name: 'Instructor Guide',\n                    url: `${guidesBase}/instructor.json`\n                });\n            }\n            \n            if (!this.userIsInstructor && breadcrumbs[0].name !== 'Student Guides') {\n                breadcrumbs.unshift({\n                    active: false,\n                    name: 'Student Guides',\n                    url: `${guidesBase}/student.json`\n                });\n            }\n\n\n            let html = content ? content : jsondata.page_data[0].content;\n            html = html.replaceAll('src=\"assets', `src=\"${guidesBase}/assets`);\n            html = html.replaceAll('src=\"../assets', `src=\"${guidesBase}/assets`);\n            html = html.replaceAll('src=\"./images', `src=\"${guidesBase}/images`);\n            var back =false;\n            if (this.history.length > 0) {\n                back =true;\n            }\n\n            if(!$(this.header).find(\".modal-help-links\").length){\n                await this.renderAppend(TEMPLATES.MODAL_HELP_LINKS_PAGE, {isinstructor:this.userIsInstructor}, $(this.header).find(\".modal-help-header\"));\n            }\n            await this.renderReplace(TEMPLATES.MODAL_HELP_GUIDE_PAGE, {html: html, breadcrumbs: breadcrumbs,isinstructor:this.userIsInstructor,back:back}, this.content);\n            this.currentPath = url.substring(0, url.lastIndexOf('/'));\n            if (target) {\n                const anchor = target.startsWith('#') ? $(target) : $(`#${target}`);\n                if (anchor.length) anchor[0].scrollIntoView();\n            }\n            else this.getBody()[0].scrollTop = 0;\n\n            this.history.push([url, target]);\n\n        } catch (error) {\n            Notification.exception(error);\n        } finally {\n            this.setLoading(false);\n        }\n    }\n\n    /**\n     * Fetches from url and returns json.\n     * @param {String} url Url to fetch from.\n     */\n    async getJsonData(url) {\n        const response = await fetch(url);\n        return response.json();\n    }\n\n    /**\n     * Appends a loading spinner to modal if loading is true, removes spinner if false.\n     * @param {Boolean} loading True for loading, contentfalse for not-loading.\n     */\n    setLoading(loading) {\n        if (loading) {\n            return this.renderAppend(TEMPLATES.OVERLAY_LOADING, {visible: true}, this.content);\n        } else {\n            this.getBody().find(SELECTORS.OVERLAY_LOADING).remove();\n        }\n    }\n\n    /**\n     * Render template using data and replace area.\n     * @param {String} template Template to render.\n     * @param {Object} data Template data.\n     * @param {Object|String} area Selector or jquery object.\n     */\n    renderReplace(template, data, area) {\n        return Templates.render(template, data)\n            .then((html, js) => Templates.replaceNodeContents(area, html, js));\n    }\n\n    /**\n     * Render template using data and append to area.\n     * @param {String} template Template to render.\n     * @param {Object} data Template data.\n     * @param {Object|String} area Selector or jquery object.\n     */\n    renderAppend(template, data, area) {\n        return Templates.render(template, data)\n            .then((html, js) => Templates.appendNodeContents(area, html, js));\n    }\n\n    /**\n     * Resets modal content and search.\n     */\n    resetModal() {\n        this.content.html('');\n        this.searchBox.val('');\n        this.suggestionBox.html('');\n    }\n\n    /**\n     * Clears whatever is in the search box.\n     */\n    clearSearch() {\n        this.searchBox.val('');\n        this.hideSearchClear();\n    }\n\n    /**\n     * Removes d-none class from suggestion box and scrolls to the top of the list.\n     */\n    showSuggestionBox() {\n        this.suggestionBox.removeClass('d-none');\n        this.suggestionBox[0].scrollTop = 0;\n    }\n\n    /**\n     * Adds d-none class to suggestion box.\n     */\n    hideSuggestionBox() {\n        this.suggestionBox.addClass('d-none');\n    }\n\n    /**\n     * Removes d-none class from clear search button.\n     */\n    showSearchClear() {\n        this.searchClear.removeClass('d-none');\n    }\n\n    /**\n     * Adds d-none class to clear search button.\n     */\n    hideSearchClear() {\n        this.searchClear.addClass('d-none');\n    }\n\n    /**\n     * Returns an array of suggestions in the suggestion box.\n     * @returns {JQuery}\n     */\n    getSuggestionItems() {\n        return this.suggestionBox.find(SELECTORS.SUGGESTION_ITEM);\n    }\n\n    /**\n     * Returns modal type. Used when creating the modal using ModalFactory.\n     * @returns {String}\n     */\n    static getType() {\n        return 'theme_urcourses_default-help';\n    }\n}\n\n// Setup code for adding ModalHelp to the modal factory.\nlet registered = false;\nif (!registered) {\n    ModalRegistry.register(ModalHelp.getType(), ModalHelp, 'theme_urcourses_default/modal_help');\n    registered = true;\n}\n\n"],"file":"modal_help.min.js"}