{"version":3,"file":"course_request.min.js","sources":["../src/course_request.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Responsible for registering all events for Course Tools including:\n * Course Creation-> calls Course Action Library to handle modals and ajax request\n * Course Duplication-> calls Course Action Library to handle modals and ajax request\n * Create Student Account-> performs ajax request to create a student account for instructor\n * Course Description Edit-> Reroutes to Course Edit page, and add marker to go right to Course Summary Section\n *\n * @package    theme_urcourses_default\n * @author     Brooke Clary\n *\n */\n\ndefine(['jquery', 'core/ajax', 'core/notification', 'core/str',\n    'core/modal_factory', 'core/modal_events','theme_urcourses_default/course_actions'],\n    function($, ajax, notification, str, ModalFactory, ModalEvents,courseActionsLib) {\n\n    /** Container jquery object. */\n    var _root;\n    /** Course ID */\n    var _course;\n    var _categories;\n    var _templatelist;\n\n    /** Jquery selector strings. */\n    var SELECTORS = {\n        HEADER: '#page-header .header-body',\n        HEADER_TOP: \"#page-header .page-head\",\n        BTN_COURSETOOLS: '#btn_coursetools',\n        BTN_DUPLICATE: '#btn_duplicate',\n        BTN_NEW: '#btn_new',\n        BTN_STUDENT_ACCOUNT: '#btn_student_account',\n        BTN_STUDENT_ENROL: '#btn_student_enrol',\n        BTN_DESCRIPTION: '#btn_editdescription',\n    };\n\n    /**\n     * Initializes global variables.\n     * @param {string} root - Jquery selector for container.\n     * @param {int} headerstyle - selected header style.\n     * @param {int} courseid - ID of current course.\n     * @return void\n     */\n    var _setGlobals = function(root, course,templatelist, categories) {\n       _root = $(root);\n       _course = course;\n       _templatelist = templatelist;\n       _categories = categories;\n\n       //course constructor, incase any create or duplicate course\n       courseActionsLib = new courseActionsLib(\n        _course.id,\n        _course.coursename,\n        _course.shortname,\n        _course.startdate,\n        _course.enddate,\n        _templatelist,\n         _categories);\n    };\n\n    /**\n     * Sets up event listeners.\n     * @return void\n     */\n    var _registerEventListeners = function() {\n\n        _root.on('click', SELECTORS.BTN_COURSETOOLS, _courseAction);\n        _root.on('click', SELECTORS.BTN_DUPLICATE, _courseAction);\n        _root.on('click', SELECTORS.BTN_NEW, _courseAction);\n        _root.on('click', SELECTORS.BTN_DESCRIPTION, _editCourseDescription);\n        _root.on('click', SELECTORS.BTN_STUDENT_ACCOUNT, _createStudentAction);\n        _root.on('click', SELECTORS.BTN_STUDENT_ENROL, _enrollStudentAction);\n    };\n\n    /**\n     * If course has been used in previous term, options to\n     * duplicate or create are given. If either duplicate or create are\n     * clicked they are passed to this function, which calls on the\n     * Course Action Library to provide the correct modals, and perform\n     * any ajax requests\n     */\n    var _courseAction = function() {\n\n        var button = \"btn_new\";\n        var _element = $(this);\n\n        courseActionsLib.coursereqAction(_element,button, _course.category, _course.startdate, _course.enddate);\n    };\n\n     /**\n     * Modal after button click to create student account\n     */\n    var _createStudentAction =  function() {\n\n        //look if created or not\n        var value =$(SELECTORS.BTN_STUDENT_ACCOUNT).data(\"value\");\n        var username =$(SELECTORS.BTN_STUDENT_ACCOUNT).data(\"username\");\n\n        if(value){\n            //view student account info\n             getStudentAccountInfo(username);\n        }else{\n\n            var modaltitle = 'Create a test student for UR Courses';\n            var modalaction = '<b>The following test user account will be created: </b><br><br>'\n                            + '<b>Email address </b>'\n                            +'<a class=\"btn btn-link p-0\" role=\"button\" data-toggle=\"modal\" '\n                            +'data-placement=\"right\" data-target=\"moodle-email-modal-dialogue\" data-html=\"true\">'\n                                +'<i class=\"icon fa fa-question-circle text-info fa-fw \" '\n                                +'title=\"Help with test student account email\" '\n                                +'aria-label=\"Help with test student account email\"></i>'\n                            +'</a><br>'+username+'+urstudent@uregina.ca'\n                            +'<br><br><b>Username </b><br>'+username+'-urstudent'\n                            +'<hr/>'\n                            +'You can enrol this account to test and experience a course as a student.'\n                            +'<br><br>'\n                            +'<b>Would you like to create the test student account?</b>'\n                            +'<br><label class=\"form-check  fitem  \">'\n                            +'<input type=\"checkbox\" name=\"id_enroll_test\" class=\"form-check-input \"'\n                            +' id=\"id_enroll_test\" value=\"1\" size=\"\" checked>'\n                            +'Enrol test student into this course'\n                            +'</label>';\n\n            //adding in confirmation modal in case buttons accidentally clicked\n            ModalFactory.create({\n                type: ModalFactory.types.SAVE_CANCEL,\n                title: modaltitle,\n                body: \"<p>\"+ modalaction +\"</p>\"\n            }).then(function(modal) {\n\n                modal.setSaveButtonText('Create');\n                var root = modal.getRoot();\n                root.on(ModalEvents.cancel, function(){\n                    return;\n                });\n\n                $(root).find('.fa-question-circle').parent().click(function() {\n                    ModalFactory.create({\n                        type: ModalFactory.types.CANCEL,\n                        title: \"Help with test student account email\",\n                        body:'<p>Email sent to this address will appear in your username@uregina.ca inbox</p>',\n                    }).then(function(modal) {\n                        modal.show();\n                    });\n                });\n\n                root.on(ModalEvents.save, function(e){\n                    e.preventDefault();\n                    $(root).find('button[data-action=\"save\"]').append(\n                        ' <span class=\"spinner-border spinner-border-sm\" '+\n                        'role=\"status\" aria-hidden=\"true\"></span><span class=\"sr-only\">Loading...</span>');\n                    var checked = $(root).find(\"#id_enroll_test\").is(\":checked\");\n                    _createStudentAccount(username, checked);\n                });\n\n                modal.show();\n            });\n        }\n    };\n\n    /**\n     * After modal info has been entered call ajax request\n     */\n    var getStudentAccountInfo =  function(username) {\n          // return if required values aren't set\n          if (!_course.id) {\n            return;\n        }\n\n        // set args\n        var args = {\n            courseid: _course.id,\n            username: username\n        };\n\n        // set ajax call\n        var ajaxCall = {\n            methodname: 'theme_urcourses_default_header_test_account_info',\n            args: args,\n            fail: notification.exception\n        };\n\n        // initiate ajax call\n        var promise =  ajax.call([ajaxCall]);\n        promise[0].done(function(data) {\n\n            var modaltitle = 'User details for test student account';\n            var info =\"\";\n            if(data.userid != 0){\n               info = '<b>Email address </b>'\n                    +'<a class=\"btn btn-link p-0\" role=\"button\" data-toggle=\"modal\" '\n                    +'data-placement=\"right\" data-target=\"moodle-email-modal-dialogue\" data-html=\"true\">'\n                    +'<i class=\"icon fa fa-question-circle text-info fa-fw \"'\n                    +' title=\"Help with test student account email\" aria-label=\"Help with test student account email\"></i>'\n                    +'</a><br>'+data.email\n                    +'<br><b>Username </b><br>'+data.username\n                    +'<br><b>Account Creation Date </b><br>'+data.datecreated+'<br/>'\n                    +'<br><div class=\"alert alert-warning d-flex justify-content-between bd-highlight \" role=\"alert\">'\n                        +'<div class=\"\">Reset test account password </div>'\n                        +'<button id=\"test_account_reset\" type=\"button\" class=\"btn btn-primary\" >Reset Password</button>'\n                    +'</div>';\n            }else{\n               info= '<div class=\"alert alert-warning\" role=\"alert\">'\n                    +' Test student account could not be found!</div>';\n            }\n\n            //adding in confirmation modal in case buttons accidentally clicked\n            ModalFactory.create({\n                type: ModalFactory.types.CANCEL,\n                title: modaltitle,\n                body:info,\n\n            }).then(function(modal) {\n                var root = modal.getRoot();\n                $(root).find('button[data-action=\"cancel\"]').text(\"Close\");\n\n                $(root).find('.fa-question-circle').parent().click(function() {\n                    ModalFactory.create({\n                        type: ModalFactory.types.CANCEL,\n                        title: \"Help with test student account email\",\n                        body:'<p>Email sent to this address will appear in your username@uregina.ca inbox</p>',\n                    }).then(function(modal) {\n                        modal.show();\n                    });\n                });\n\n                 //remove modal on hide\n                 root.on(ModalEvents.hidden, function(){\n                    //remove inputs otherwise duplicates are made causing id problems\n                    $( \"#test_account_reset\" ).remove();\n                });\n\n                modal.show();\n            }).done(function() {\n                $(\"#test_account_reset\").bind('click', function() { _resetStudentAccount($(this), username); } );\n            });\n        });\n    };\n\n     /**\n     * After modal info has been entered call ajax request\n     */\n    var _createStudentAccount = function(username, checked) {\n\n        // return if required values aren't set\n        if (!_course.id) {\n            return;\n        }\n\n        // set args\n        var args = {\n            courseid: _course.id,\n            username: username,\n            checked: checked\n        };\n\n        // set ajax call\n        var ajaxCall = {\n            methodname: 'theme_urcourses_default_header_create_test_account',\n            args: args,\n            fail: notification.exception\n        };\n\n        // initiate ajax call\n        var promise = ajax.call([ajaxCall]);\n        promise[0].done(function(response) {\n            _studentAccountResponse(response);\n        });\n    };\n    /**\n     * Handles ajax return and response to return data\n     * @param {Object} response\n     */\n    var _studentAccountResponse = function(data) {\n\n        var title =\"\";\n        var info =\"\";\n        if(typeof data.unenroll != \"undefined\"){\n\n            title = \"Success: \";\n            info='<div class=\"alert alert-success\" role=\"alert\">'\n                    +data.username+\" was removed from course. </div>\";\n\n            if(!data.unenroll){\n                title = \"ERROR:\";\n                info='<div class=\"alert alert-warning\" role=\"alert\">';\n                info += data.username+\" could not be removed from course. </div>\";\n            }\n        }else if(typeof data.reset != \"undefined\"){\n            title = \"Success: \";\n            info='<div class=\"alert alert-success\" role=\"alert\">'\n                    +data.username+\" password was reset. \"+\n                    \"You will recieve an email with new credentials. \"+\n                    \"It may take a few minutes to process.</div>\";\n\n            if(!data.reset && data.userid !=0){\n                title = \"ERROR:\";\n                info='<div class=\"alert alert-warning\" role=\"alert\">';\n                info += data.username+\"'s password could not be reset, email failed to send </div>\";\n            }else if(!data.reset && data.userid ==0){\n                title = \"ERROR:\";\n                info='<div class=\"alert alert-warning\" role=\"alert\">';\n                info += data.username+\"'s account could not be found </div>\";\n            }\n        }else{\n\n            //create new modal\n            title = \"Success: \";\n            info='<div class=\"alert alert-success\" role=\"alert\">';\n\n            //if both actions were done\n            if(data.created != false && data.enrolled !=false){\n                info +=data.username+\" was created and enrolled into this course. \"+\n                \"New account information has been emailed to you. </div>\";\n            }else if(data.created != false && data.enrolled ==false ){\n                info += data.username+\" was created, but was NOT enrolled into this course. \"+\n                \"New account information has been emailed to you. </div>\";\n            }else if(data.created == false && data.enrolled !=false ){\n                info += data.username+\" has been enrolled into this course.</div>\";\n            }else{\n                title = \"ERROR:\";\n                info='<div class=\"alert alert-warning\" role=\"alert\">';\n                info += data.username+\" already exists and is enrolled into the course. </div>\";\n            }\n        }\n\n        //adding in confirmation modal in case buttons accidentally clicked\n        ModalFactory.create({\n            type: ModalFactory.types.CANCEL,\n            title: title,\n            body:  info\n        })\n        .then(function(modal) {\n\n            var root = modal.getRoot();\n            $(root).find('button[data-action=\"cancel\"]').text(\"Close\");\n            root.on(ModalEvents.cancel, function(){\n                if(typeof data.reset == \"undefined\"){\n                    location.reload();\n                }\n                return;\n            });\n\n            root.find(\".close\").click(function() {\n                if(typeof data.reset == \"undefined\"){\n                    location.reload();\n                }\n                return;\n            });\n\n            modal.show();\n        });\n    };\n\n    /**\n     * After modal info has been entered call ajax request\n     */\n    var _enrollStudentAction = function() {\n\n        //look if created or not\n        var value =$(SELECTORS.BTN_STUDENT_ENROL).data(\"value\");\n        var username =$(SELECTORS.BTN_STUDENT_ENROL).data(\"username\");\n        var modaltitle =  (value) ? 'Unenrol test student account in course' :'Enrol test student account in course';\n        var modalaction =  (value) ? 'remove ':  'enrol the test student account ';\n        modalaction = modalaction+username+'+urstudent@uregina.ca from course';\n\n        //adding in confirmation modal in case buttons accidentally clicked\n        ModalFactory.create({\n            type: ModalFactory.types.SAVE_CANCEL,\n            title: modaltitle,\n            body: \"<p><b>Do you want to \"+ modalaction +\"?</b><br /></p>\"\n        }).then(function(modal) {\n\n            if(value) {modal.setSaveButtonText('Remove');}\n            else{modal.setSaveButtonText('Enrol');}\n            var root = modal.getRoot();\n            root.on(ModalEvents.cancel, function(){\n                return;\n            });\n\n            root.on(ModalEvents.save, function(e){\n                e.preventDefault();\n                $(root).find('button[data-action=\"save\"]').append(\n                    ' <span class=\"spinner-border spinner-border-sm\"'+\n                    ' role=\"status\" aria-hidden=\"true\"></span><span class=\"sr-only\">Loading...</span>');\n                if(value) {_unenrollStudentAccount(username);}\n                else{ _createStudentAccount(username,true);}\n            });\n\n            modal.show();\n        });\n    };\n\n    /**\n    * After modal info has been entered call ajax request\n    */\n    var _resetStudentAccount = function(e, username) {\n\n        var modaltitle = 'Reset Password for test student account';\n        var modalaction = 'reset the password for student account '+username+'+urstudent@uregina.ca.';\n\n        //adding in confirmation modal in case buttons accidentally clicked\n        ModalFactory.create({\n            type: ModalFactory.types.SAVE_CANCEL,\n            title: modaltitle,\n            body: \"<p><b>Do you want to \"+ modalaction +\"?</b><br /></p>\"\n        }).then(function(modal) {\n\n            modal.setSaveButtonText('Reset Password');\n            var root = modal.getRoot();\n\n            root.on(ModalEvents.cancel, function(){\n                return;\n            });\n\n            root.on(ModalEvents.save, function(e){\n\n                e.preventDefault();\n                $(root).find('button[data-action=\"save\"]').append(\n                    '<span class=\"spinner-border spinner-border-sm\"'+\n                    ' role=\"status\" aria-hidden=\"true\"></span><span class=\"sr-only\">Loading...</span>');\n\n                // set args\n                var args = {\n                    courseid: _course.id,\n                    username: username\n                };\n\n                // set ajax call\n                var ajaxCall = {\n                    methodname: 'theme_urcourses_default_header_reset_test_account',\n                    args: args,\n                    fail: notification.exception\n                };\n\n                // initiate ajax call\n                var promise = ajax.call([ajaxCall]);\n                promise[0].done(function(response) {\n                    $(root).find('button[data-action=\"cancel\"]').click();\n                    _studentAccountResponse(response);\n                    return;\n                });\n            });\n            modal.show();\n        });\n    };\n    /**\n    * After modal info has been entered call ajax request\n    */\n    var _unenrollStudentAccount = function(username) {\n\n        // return if required values aren't set\n        if (!_course.id) {\n            return;\n        }\n\n        // set args\n        var args = {\n            courseid: _course.id,\n            username: username\n        };\n\n        // set ajax call\n        var ajaxCall = {\n            methodname: 'theme_urcourses_default_header_unenroll_test_account',\n            args: args,\n            fail: notification.exception\n        };\n\n        // initiate ajax call\n        var promise = ajax.call([ajaxCall]);\n        promise[0].done(function(response) {\n            _studentAccountResponse(response);\n        });\n    };\n     /**\n     * Link to course edit page to edit course description\n     */\n    var _editCourseDescription = function() {\n\n        var origin   = window.location.href;\n        origin =origin.substring(0,origin.lastIndexOf('/'));\n\n        var target = origin + \"/edit.php?id=\"+_course.id+\"#id_descriptionhdr\";\n        window.location.href = target;\n    };\n\n     /**\n     * Check if on course edit page and if hash has been added to url\n     */\n    var _checkCourseEdit = function() {\n\n        var origin   = window.location.href;\n        if (origin.indexOf(\"course/edit.php\") >= 0){\n            if(window.location.hash != \"\"){\n                var navHeight = $('.navbar').outerHeight();\n                $('html, body').animate({\n                    scrollTop: $(window.location.hash).offset().top - navHeight\n                }, 2000);\n            }\n        }\n    };\n\n    /**\n     * Entry point to module. Sets globals and registers event listeners.\n     * @param {String} root Jquery selector for container.\n     * @return void\n     */\n    var init = function(root, course, templatelist, categories) {\n        _setGlobals(root, course, templatelist,categories);\n        _registerEventListeners();\n\n        //little hacky way to use a scroll jump on course edit page without editing course edit\n        _checkCourseEdit();\n    };\n\n    return {\n        init: init\n    };\n\n});"],"names":["define","$","ajax","notification","str","ModalFactory","ModalEvents","courseActionsLib","_root","_course","_categories","_templatelist","SELECTORS","_courseAction","button","_element","this","coursereqAction","category","startdate","enddate","_createStudentAction","value","data","username","getStudentAccountInfo","modaltitle","modalaction","create","type","types","SAVE_CANCEL","title","body","then","modal","setSaveButtonText","root","getRoot","on","cancel","find","parent","click","CANCEL","show","save","e","preventDefault","append","checked","is","_createStudentAccount","id","ajaxCall","methodname","args","courseid","fail","exception","call","done","info","userid","email","datecreated","text","hidden","remove","bind","_resetStudentAccount","response","_studentAccountResponse","unenroll","reset","created","enrolled","location","reload","_enrollStudentAction","_unenrollStudentAccount","_editCourseDescription","origin","window","href","target","substring","lastIndexOf","init","course","templatelist","categories","coursename","shortname","_setGlobals","indexOf","hash","navHeight","outerHeight","animate","scrollTop","offset","top","_checkCourseEdit"],"mappings":"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"}