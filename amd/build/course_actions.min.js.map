{"version":3,"sources":["../src/course_actions.js"],"names":["TEMPLATES","MODAL_COURSE_ACTION_CONTENT","SELECTORS","COURSENAME","SHORTNAME","CATEGORY","MODALHOLDER","STARTDAY","STARTMONTH","STARTYEAR","STARTHOUR","STARTMINUTE","ENDDAY","ENDMONTH","ENDYEAR","ENDHOUR","ENDMINUTE","ENDENABLE","ERR_COURSENAME","ERR_SHORTNAME","ERR_CATEGORY","ERR_START","ERR_END","courseActionsLib","courseid","coursename","shortname","startdate","enddate","templatelist","categories","self","_courseid","_coursename","_shortname","_startdate","_enddate","_templatelist","_categories","_element","button","selectcatergory","selectstart","selectend","modaltitle","attr","modalaction","templatenew","istemplatelist","length","render","template","ModalFactory","create","type","types","SAVE_CANCEL","title","body","then","modal","setSaveButtonText","root","getRoot","on","ModalEvents","cancel","save","e","preventDefault","validate","createCourse","duplicateCourse","hidden","remove","show","done","registerSelectorEventListeners","val","d","Date","year","getFullYear","mon","getMonth","mday","getDate","populateDateSelects","registerDateEventListeners","currentyear","append","monthNames","currentmonth","month","mtemp","currentday","day","hour","minute","templateHolder","find","removeClass","addClass","checked","is","prop","startyear","endyear","startmonth","endmonth","startday","endday","actualStart","actualEnd","$","each","key","push","id","fullname","summary","courseimage","name","renderData","Templates","renderPromise","bind","setActiveTemplate","showMoreInfo","setEnddate","validateDaysInMonth","test","text","getTime","course","split","DEFAULT","selectedTemplate","templateid","category","starthour","startminute","endhour","endminute","spinnerCheck","args","categoryid","ajaxCall","methodname","fail","notification","exception","promise","ajax","call","response","error","info","url","window","location","href","user","hide"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This Library is responsilble for\n * Course Creation-> creates and displays modal and handles ajax request\n * Course Duplication-> creates and displays modal and handles ajax request\n * Date Selectors-> create and displays date selectors form\n *\n * @package    theme_urcourses_default\n * @author     Brooke Clary\n *\n */\n\nimport $ from 'jquery';\nimport ajax from 'core/ajax';\nimport ModalFactory from 'core/modal_factory';\nimport ModalEvents from 'core/modal_events';\nimport notification from 'core/notification';\nimport Templates from 'core/templates';\n\nconst TEMPLATES = {\n    MODAL_COURSE_ACTION_CONTENT: 'theme_urcourses_default/modal_course_action_content'\n};\n\nconst SELECTORS = {\n    COURSENAME: '#course_tools_coursename',\n    SHORTNAME: '#course_tools_shortname',\n    CATEGORY: '#course_tools_category',\n    MODALHOLDER: '#course_tools_modal_content',\n    STARTDAY: '#course_tools_start_day',\n    STARTMONTH: '#course_tools_start_month',\n    STARTYEAR: '#course_tools_start_year',\n    STARTHOUR: '#course_tools_start_hour',\n    STARTMINUTE: '#course_tools_start_minute',\n    ENDDAY: '#course_tools_end_day',\n    ENDMONTH: '#course_tools_end_month',\n    ENDYEAR: '#course_tools_end_year',\n    ENDHOUR: '#course_tools_end_hour',\n    ENDMINUTE: '#course_tools_end_minute',\n    ENDENABLE: '#course_tools_enddate_enabled',\n    ERR_COURSENAME: '#error_course_tools_coursename',\n    ERR_SHORTNAME: '#error_course_tools_shortname',\n    ERR_CATEGORY: '#error_course_tools_category',\n    ERR_START: '#error_course_tools_start',\n    ERR_END: '#error_course_tools_end',\n};\n\nexport default class courseActionsLib {\n    //_courseid =0;\n   // _coursename=\"\";\n    //_shortname=\"\";\n    //_startdate=\"\";\n    //_enddate=\"\";\n   // _templatelist = \"\";\n   // _categories = \"\";\n    //self ;\n\n    constructor(courseid,coursename, shortname, startdate, enddate, templatelist, categories){\n\n        self = this;\n        self._courseid = courseid;\n        self._coursename = coursename;\n        self._shortname = shortname;\n        self._startdate = startdate;\n        self._enddate = enddate;\n        self._templatelist = templatelist;\n        self._categories = categories;\n    }\n\n    /**\n    * Used for new course and duplicate course creation on button clicks\n    */\n    async coursereqAction(_element,button,selectcatergory, selectstart, selectend) {\n        var modaltitle = (_element.attr('id') == button) ? 'Create new course' : 'Duplicate this course';\n        var modalaction = (_element.attr('id') == button) ? 'create a new' : 'duplicate this';\n        var templatenew = (_element.attr('id') == button) ? true : \"\";\n        var istemplatelist = (self._templatelist.length>0) ? true : \"\";\n        var template =  await self.render(TEMPLATES.MODAL_COURSE_ACTION_CONTENT, templatenew,istemplatelist);\n\n        //adding in confirmation modal in case buttons accidentally clicked\n        ModalFactory.create({\n            type: ModalFactory.types.SAVE_CANCEL,\n            title: modaltitle,\n            body: \"<p><b>Are you sure you want to \"+ modalaction +\" course?</b><br />\"\n                + ((_element.attr('id') == button) ? \"<small>Select from the templates below. \"+\n                \"(Scroll for more options)</small>\" : \"<small>Student data will not be included in the duplicated course.</small>\")\n                + template\n                + \"</p>\"\n        }).then(function(modal) {\n\n            modal.setSaveButtonText((_element.attr('id') == button) ? 'Create new course' : 'Duplicate this course');\n            var root = modal.getRoot();\n            root.on(ModalEvents.cancel, function(){\n                return;\n            });\n\n            root.on(ModalEvents.save, function(e){\n                e.preventDefault();\n                if(self.validate()){\n                    if((_element.attr('id') == button)){\n                        self.createCourse();\n                        return;\n                    }else{\n                        self.duplicateCourse();\n                        return;\n                    }\n                }\n            });\n            //remove modal on hide\n            root.on(ModalEvents.hidden, function(){\n                //remove inputs otherwise duplicates are made causing id problems\n                $(SELECTORS.MODALHOLDER).remove();\n            });\n\n            modal.show();\n        }).done(function() {\n            if((_element.attr('id') == button)){\n                self.registerSelectorEventListeners(_element, button);\n            }else{\n                 $(SELECTORS.COURSENAME).val(self._coursename+\" (Copy)\");\n                 $(SELECTORS.SHORTNAME).val(self._shortname+\" (Copy)\");\n            }\n\n            //if new course\n            if(_element.attr('id') == button){\n                var d = new Date();\n                selectstart.year = d.getFullYear();\n                selectstart.mon = d.getMonth()+1;\n                selectstart.mday = d.getDate();\n                selectend.year= d.getFullYear()+1;\n                selectend.mon= d.getMonth()+1;\n                selectend.mday= d.getDate();\n            }\n\n            self.populateDateSelects(selectstart,selectend);\n\n            //change category to that of course\n            $(SELECTORS.CATEGORY).val(selectcatergory);\n\n            self.registerDateEventListeners(_element);\n        });\n    }\n\n    /**\n    * Switch choosen template based on click in template list\n    */\n    populateDateSelects(selectstart, selectend) {\n\n        //populate start and end dates\n        var currentyear = (new Date()).getFullYear();\n        for (var year = 1900; year < currentyear+30; year++) {\n            $(SELECTORS.STARTYEAR).append('<option  value=\"'+year+'\" '\n                                + ((year == selectstart.year) ? \"selected\": \" \" ) +'>' + year + '</option>');\n            $(SELECTORS.ENDYEAR).append('<option value=\"'+year+'\"'\n                                +(((year == selectend.year && selectend.year >= selectstart.year) ||\n                                (year == currentyear && selectend.year <selectstart.year) ) ? \"selected\": \" \" )+'>'\n                                + year + '</option>');\n        }\n\n        var monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\",\n                            \"August\", \"September\", \"October\", \"November\", \"December\"];\n        var currentmonth = (new Date()).getMonth();\n        for (var month = 0; month < monthNames.length; month++) {\n              var mtemp = month;\n              mtemp++;\n              $(SELECTORS.STARTMONTH).append('<option value=\"'+mtemp+'\" '\n                                        +((mtemp == selectstart.mon) ? \"selected\": \" \" )+'>' + monthNames[month] + '</option>');\n              $(SELECTORS.ENDMONTH).append('<option value=\"'+mtemp+'\" '\n                                        +(((mtemp == selectend.mon && selectend.year >= selectstart.year) ||\n                                        (month == currentmonth && selectend.year <selectstart.year) ) ? \"selected\": \" \" )\n                                        +'>' + monthNames[month] + '</option>');\n        }\n\n        var currentday = (new Date()).getDate();\n        for (var day = 1; day < 32; day++) {\n            $(SELECTORS.STARTDAY).append('<option value=\"'+day+'\" '\n                                        +((day == selectstart.mday) ? \"selected\": \" \" )+'>' + day + '</option>');\n            $(SELECTORS.ENDDAY).append('<option value=\"'+day+'\" '\n                                        +(((day == selectend.mday && selectend.year >= selectstart.year) ||\n                                        (day == currentday && selectend.year <selectstart.year) ) ? \"selected\": \" \" )\n                                        +'>' + day + '</option>');\n        }\n\n        for (var hour = 0; hour < 24; hour++) {\n            $(SELECTORS.STARTHOUR).append('<option value=\"'+hour+'\">'\n                                            + ((hour < 10) ? \"0\"+hour: hour ) + '</option>');\n            $(SELECTORS.ENDHOUR).append('<option value=\"'+hour+'\">'\n                                        + ((hour < 10) ? \"0\"+hour: hour ) + '</option>');\n        }\n\n        for (var minute = 0; minute < 61; minute++) {\n            $(SELECTORS.STARTMINUTE).append('<option value=\"'+minute+'\"    >'\n                                            + ((minute < 10) ? \"0\"+minute: minute ) + '</option>');\n            $(SELECTORS.ENDMINUTE).append('<option  value=\"'+minute+'\"  >'\n                                            + ((minute < 10) ? \"0\"+minute: minute ) + '</option>');\n        }\n    }\n\n    /**\n    * Switch choosen template based on click in template list\n    */\n    setActiveTemplate(e) {\n\n        var templateHolder = $('div[data-role=\"templateholder\"');\n        $(templateHolder).find('.active').removeClass(\"active\");\n        e.addClass(\"active\");\n    }\n    /**\n    * Enable or disable enddate selector\n    */\n    setEnddate(e) {\n\n        var checked;\n        if(e.is(\":checked\")) {checked=false;} else{checked=true;}\n        $(SELECTORS.ENDDAY).prop(\"disabled\", checked);\n        $(SELECTORS.ENDMONTH).prop(\"disabled\", checked);\n        $(SELECTORS.ENDYEAR).prop(\"disabled\", checked);\n        $(SELECTORS.ENDHOUR).prop(\"disabled\", checked);\n        $(SELECTORS.ENDMINUTE).prop(\"disabled\", checked);\n    }\n    /**\n    * Check if selected dates are valid\n    */\n    validateDaysInMonth () {\n\n        var startyear = $(SELECTORS.STARTYEAR).val();\n        var endyear = $(SELECTORS.ENDYEAR).val();\n        var startmonth = $(SELECTORS.STARTMONTH).val();\n        var endmonth = $(SELECTORS.ENDMONTH).val();\n        var startday = $(SELECTORS.STARTDAY).val();\n        var endday = $(SELECTORS.ENDDAY).val();\n\n        var actualStart = new Date(startyear, startmonth, 0).getDate();\n        var actualEnd = new Date(endyear, endmonth, 0).getDate();\n\n        if(actualStart < startday){\n            $(SELECTORS.STARTDAY).val(actualStart);\n        }\n        if(actualEnd < endday){\n            $(SELECTORS.ENDDAY).val(actualEnd);\n        }\n    }\n\n    /**\n     * Update the modal body using given template and data.\n     *\n     * @method render\n     * @param {String} template - The name of the template to render.\n     * @param {Object} data - Data for template.\n     * @param {Object} breadcrumbData - Data required for rending breadcrumbs.\n     */\n     async render(template,templatenew,istemplatelist) {\n\n        var templatelist = [];\n        $.each(self._templatelist, function(key,val) {\n            templatelist.push({\"id\":val.id,\"fullname\":val.fullname,\"summary\":val.summary, \"courseimage\": val.courseimage});\n        });\n\n        var categories = [];\n        $.each(self._categories, function(key,val) {\n            categories.push({\"id\":val.id,\"name\":val.name});\n        });\n        const renderData = {\n            templatenew: templatenew,\n            templatelist:templatelist,\n            istemplatelist:istemplatelist,\n            categories: categories\n        };\n        const renderPromise = await Templates.render(template, renderData);\n        return renderPromise;\n    }\n\n    /**\n     * Sets up event listeners.\n     * @return void\n     */\n     registerSelectorEventListeners (_element, button) {\n\n        if(_element.attr('id') == button){\n            //set event listners for template options\n            $('.tmpl-label').bind('click', function() { self.setActiveTemplate($(this)); } );\n            $('button[data-role=\"info_button\"').bind('click', function() { self.showMoreInfo($(this)); } );\n        }\n    }\n    /**\n     * Sets up event listeners.\n     * @return void\n     */\n     registerDateEventListeners () {\n        //set event listners for template options\n        $(SELECTORS.ENDENABLE).bind('click', function() { self.setEnddate($(this)); } );\n        $(SELECTORS.ENDMONTH).bind('blur', function() { self.validateDaysInMonth ($(this)); } );\n        $(SELECTORS.ENDDAY).bind('blur', function() { self.validateDaysInMonth ($(this)); } );\n        $(SELECTORS.STARTMONTH).bind('blur', function() { self.validateDaysInMonth ($(this)); } );\n        $(SELECTORS.STARTDAY).bind('blur', function() { self.validateDaysInMonth ($(this)); } );\n    }\n\n    /**\n     * For Duplicate and Create course.\n     * Validate if course name and shortname have been entered\n     */\n     validate() {\n\n        var coursename = $(SELECTORS.COURSENAME).val();\n        var shortname = $(SELECTORS.SHORTNAME).val();\n        var startday = $(SELECTORS.STARTDAY).val();\n        var startmonth = $(SELECTORS.STARTMONTH).val();\n        var startyear = $(SELECTORS.STARTYEAR).val();\n        var endyear = $(SELECTORS.ENDYEAR).val();\n        var endday = $(SELECTORS.ENDDAY).val();\n        var endmonth = $(SELECTORS.ENDMONTH).val();\n        var test =true;\n\n        if(coursename.length ==0){\n            $(SELECTORS.ERR_COURSENAME).text(\"Please enter a name for the course\");\n            $(SELECTORS.ERR_COURSENAME).attr(\"display\", \"block\");\n            $(SELECTORS.ERR_COURSENAME).show();\n            test = false;\n        }else{\n            $(SELECTORS.ERR_COURSENAME).text(\"\");\n        }\n\n        if(shortname.length ==0){\n            $(SELECTORS.ERR_SHORTNAME).text(\"Please enter a short name for the course\");\n            $(SELECTORS.ERR_SHORTNAME).attr(\"display\", \"block\");\n            $(SELECTORS.ERR_SHORTNAME).show();\n            test = false;\n        }else{\n            $(SELECTORS.ERR_SHORTNAME).text(\"\");\n        }\n\n        var startdate = new Date(startyear+\".\"+startmonth+\".\"+startday).getTime()/1000;\n        var enddate = new Date(endyear+\".\"+endmonth+\".\"+endday).getTime()/1000;\n\n        if(enddate < startdate && $(SELECTORS.ENDENABLE).is(\":checked\") ){\n            $(SELECTORS.ERR_START).text(\"Course end date can not be before start date\");\n            $(SELECTORS.ERR_START).attr(\"display\", \"block\");\n            $(SELECTORS.ERR_START).show();\n            test = false;\n        }else{\n            $(SELECTORS.ERR_START).text(\"\");\n            $(SELECTORS.ERR_END).text(\"\");\n        }\n        return test;\n    }\n\n    /**\n     * For Template Lists, if button is clicked to show more\n     * info, create 2nd modal to pop up showing course description\n     */\n    showMoreInfo(e) {\n\n        var course =\"\";\n        $.each(self._templatelist, function(key,val) {\n            var id = e.attr('id').split(\"_\");\n            if(id[1] == val.id){\n               course = {\"id\":val.id,\"fullname\":val.fullname,\"summary\":val.summary, \"courseimage\": val.courseimage};\n            }\n        });\n        ModalFactory.create({\n            type: ModalFactory.types.DEFAULT,\n            title: course.fullname,\n            body: course.summary\n        }).then(function(modal) {\n            modal.show();\n        });\n    }\n\n    /**\n     * After modal info has been entered call ajax request\n     */\n    createCourse() {\n        // return if required values aren't set\n        if (!self._courseid) {\n            return;\n        }\n\n        var templateHolder = $('div[data-role=\"templateholder\"');\n        var selectedTemplate = $(templateHolder).find('.active');\n        var templateid = $(selectedTemplate).attr('id');\n        var coursename = $(SELECTORS.COURSENAME).val();\n        var shortname = $(SELECTORS.SHORTNAME).val();\n        var category = $(SELECTORS.CATEGORY).val();\n        var startday = $(SELECTORS.STARTDAY).val();\n        var startmonth = $(SELECTORS.STARTMONTH).val();\n        var startyear = $(SELECTORS.STARTYEAR).val();\n        var starthour = $(SELECTORS.STARTHOUR).val();\n        var startminute = $(SELECTORS.STARTMINUTE).val();\n        var startdate = startday+\"-\"+startmonth+\"-\"+startyear+\"-\"+starthour+\"-\"+startminute;\n        var enddate = \"0\";\n\n        if($(SELECTORS.ENDENABLE).is(\":checked\") ){\n            var endday = $(SELECTORS.ENDDAY).val();\n            var endmonth= $(SELECTORS.ENDMONTH).val();\n            var endyear = $(SELECTORS.ENDYEAR).val();\n            var endhour = $(SELECTORS.ENDHOUR).val();\n            var endminute = $(SELECTORS.ENDMINUTE).val();\n            enddate = endday+\"-\"+endmonth+\"-\"+endyear+\"-\"+endhour+\"-\"+endminute;\n        }\n\n        self.spinnerCheck(\"show\");\n\n        //duplicate course option selected\n        // set args\n        var args = {\n            courseid: self._courseid,\n            templateid: templateid,\n            coursename: coursename,\n            shortname: shortname,\n            categoryid: category,\n            startdate: startdate,\n            enddate: enddate,\n        };\n\n        // set ajax call\n        var ajaxCall = {\n            methodname: 'theme_urcourses_default_header_create_course',\n            args: args,\n            fail: notification.exception\n        };\n\n        // initiate ajax call\n        var promise = ajax.call([ajaxCall]);\n        promise[0].done(function(response) {\n            self.spinnerCheck(\"hide\");\n\n            if(response.error!=\"\"){\n\n                var title = \"ERROR:\";\n                var info = response.error;\n\n                ModalFactory.create({\n                    title: title,\n                    body: '<p><b>'+info+'</b><br></p>',\n                })\n                .done(function(modal) {\n                    modal.show();\n                });\n            }\n            //ADD REDIRECT TO NEW COURSE USING NEW ID\n            if(response.url !=\"\"){\n                window.location.href = response.url;\n            }\n        }).fail(function() {\n            self.spinnerCheck(\"hide\");\n        });\n    }\n\n     /**\n     * After modal info has been entered call ajax request\n     */\n      duplicateCourse() {\n        // return if required values aren't set\n        if (!self._courseid) {\n            return;\n        }\n        var coursename = $(SELECTORS.COURSENAME).val();\n        var shortname = $(SELECTORS.SHORTNAME).val();\n        var category = $(SELECTORS.CATEGORY).val();\n\n        var startday = $(SELECTORS.STARTDAY).val();\n        var startmonth = $(SELECTORS.STARTMONTH).val();\n        var startyear = $(SELECTORS.STARTYEAR).val();\n        var starthour = $(SELECTORS.STARTHOUR).val();\n        var startminute = $(SELECTORS.STARTMINUTE).val();\n        var startdate = startday+\"-\"+startmonth+\"-\"+startyear+\"-\"+starthour+\"-\"+startminute;\n\n        var enddate = \"0\";\n        if($(SELECTORS.ENDENABLE).is(\":checked\") ){\n            var endday = $(SELECTORS.ENDDAY).val();\n            var endmonth= $(SELECTORS.ENDMONTH).val();\n            var endyear = $(SELECTORS.ENDYEAR).val();\n            var endhour = $(SELECTORS.ENDHOUR).val();\n            var endminute = $(SELECTORS.ENDMINUTE).val();\n            enddate = endday+\"-\"+endmonth+\"-\"+endyear+\"-\"+endhour+\"-\"+endminute;\n        }\n\n        self.spinnerCheck(\"show\");\n\n        //duplicate course option selected\n        // set args\n        var args = {\n            courseid: self._courseid,\n            coursename: coursename,\n            shortname: shortname,\n            categoryid: category,\n            startdate: startdate,\n            enddate: enddate,\n        };\n\n        // set ajax call\n        var ajaxCall = {\n            methodname: 'theme_urcourses_default_header_duplicate_course',\n            args: args,\n            fail: notification.exception\n        };\n\n        // initiate ajax call\n        var promise = ajax.call([ajaxCall]);\n        promise[0].done(function(response) {\n            self.spinnerCheck(\"hide\");\n            if(response.error!=\"\"){\n\n                var title = \"Notice:\";\n                if(response.user == \"\"){\n                    var info = '<p><b>'+response.error +'</b><br></p>';\n                }else{\n                    var info = '<div class=\"alert alert-warning\" role=\"alert\">'\n                            +response.error\n                            +\"<b>\"+response.user+\".</b>\"\n                            +'</div>';\n                }\n\n                ModalFactory.create({\n                    title: title,\n                    body: info,\n                })\n                .done(function(modal) {\n                    modal.show();\n                });\n            }\n            //ADD REDIRECT TO NEW COURSE USING NEW ID\n            if(response.url !=\"\"){\n                 window.location.href = response.url;\n            }\n        }).fail(function() {\n            self.spinnerCheck(\"hide\");\n        });\n    }\n\n    /**\n    * Used mainly for enrolment spinners, start loading and stops\n    */\n    spinnerCheck(type) {\n\n        if($('#mainspinner').length){\n            if(type == \"hide\"){\n                $('#mainspinner') .hide();\n                $('#infoholder').removeClass(\"block_urcourserequest_overlay\");\n            }else{\n                $('#mainspinner') .show();\n                $('#infoholder').addClass(\"block_urcourserequest_overlay\");\n            }\n        }\n    }\n}"],"file":"course_actions.min.js"}