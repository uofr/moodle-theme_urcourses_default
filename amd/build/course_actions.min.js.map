{"version":3,"file":"course_actions.min.js","sources":["../src/course_actions.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * This Library is responsilble for\n * Course Creation-> creates and displays modal and handles ajax request\n * Course Duplication-> creates and displays modal and handles ajax request\n * Date Selectors-> create and displays date selectors form\n *\n * @package    theme_urcourses_default\n * @author     Brooke Clary\n *\n */\n\nimport $ from 'jquery';\nimport ajax from 'core/ajax';\nimport ModalFactory from 'core/modal_factory';\nimport ModalEvents from 'core/modal_events';\nimport notification from 'core/notification';\nimport Templates from 'core/templates';\nimport module from 'core/form-autocomplete';\n\nconst TEMPLATES = {\n    MODAL_COURSE_ACTION_CONTENT: 'theme_urcourses_default/modal_course_action_content'\n};\n\nconst SELECTORS = {\n    COURSENAME: '#course_tools_coursename',\n    SHORTNAME: '#course_tools_shortname',\n    CATEGORY: '#course_tools_category',\n    MODALHOLDER: '#course_tools_modal_content',\n    STARTDAY: '#course_tools_start_day',\n    STARTMONTH: '#course_tools_start_month',\n    STARTYEAR: '#course_tools_start_year',\n    STARTHOUR: '#course_tools_start_hour',\n    STARTMINUTE: '#course_tools_start_minute',\n    ENDDAY: '#course_tools_end_day',\n    ENDMONTH: '#course_tools_end_month',\n    ENDYEAR: '#course_tools_end_year',\n    ENDHOUR: '#course_tools_end_hour',\n    ENDMINUTE: '#course_tools_end_minute',\n    ENDENABLE: '#course_tools_enddate_enabled',\n    ERR_COURSENAME: '#error_course_tools_coursename',\n    ERR_SHORTNAME: '#error_course_tools_shortname',\n    ERR_CATEGORY: '#error_course_tools_category',\n    ERR_START: '#error_course_tools_start',\n    ERR_END: '#error_course_tools_end',\n};\n\nexport default class courseActionsLib {\n    //_courseid =0;\n   // _coursename=\"\";\n    //_shortname=\"\";\n    //_startdate=\"\";\n    //_enddate=\"\";\n   // _templatelist = \"\";\n   // _categories = \"\";\n    //self ;\n\n    constructor(courseid,coursename, shortname, startdate, enddate, templatelist, categories){\n\n        self = this;\n        self._courseid = courseid;\n        self._coursename = coursename;\n        self._shortname = shortname;\n        self._startdate = startdate;\n        self._enddate = enddate;\n        self._templatelist = templatelist;\n        self._categories = categories;\n    }\n\n    /**\n    * Used for new course and duplicate course creation on button clicks\n    */\n    async coursereqAction(_element,button,selectcatergory, selectstart, selectend) {\n        var modaltitle = (_element.attr('id') == button) ? 'Create new course' : 'Duplicate this course';\n        var modalaction = (_element.attr('id') == button) ? 'create a new' : 'duplicate this';\n        var templatenew = (_element.attr('id') == button) ? true : \"\";\n        var istemplatelist = (self._templatelist.length>0) ? true : \"\";\n        var template =  await self.render(TEMPLATES.MODAL_COURSE_ACTION_CONTENT, templatenew,istemplatelist);\n\n\n        //adding in confirmation modal in case buttons accidentally clicked\n        ModalFactory.create({\n            type: ModalFactory.types.SAVE_CANCEL,\n            title: modaltitle,\n            body: \"<p><b>Are you sure you want to \"+ modalaction +\" course?</b><br />\"\n                + ((_element.attr('id') == button) ? \"<small>Select from the templates below. \"+\n                \"(Scroll for more options)</small>\" : \"<small>Student data will not be included in the duplicated course.</small>\")\n                + template\n                + \"</p>\"\n        }).then(function(modal) {\n\n            modal.setSaveButtonText((_element.attr('id') == button) ? 'Create new course' : 'Duplicate this course');\n            var root = modal.getRoot();\n            root.on(ModalEvents.cancel, function(){\n                return;\n            });\n\n            root.on(ModalEvents.save, function(e){\n                e.preventDefault();\n                if(self.validate()){\n                    if((_element.attr('id') == button)){\n                        self.createCourse();\n                        return;\n                    }else{\n                        self.duplicateCourse();\n                        return;\n                    }\n                }\n            });\n            //remove modal on hide\n            root.on(ModalEvents.hidden, function(){\n                //remove inputs otherwise duplicates are made causing id problems\n                $(SELECTORS.MODALHOLDER).remove();\n            });\n\n            modal.show();\n        }).done(function() {\n            if((_element.attr('id') == button)){\n                self.registerSelectorEventListeners(_element, button);\n            }else{\n                 $(SELECTORS.COURSENAME).val(self._coursename+\" (Copy)\");\n                 $(SELECTORS.SHORTNAME).val(self._shortname+\" (Copy)\");\n            }\n\n            //if new course\n            if(_element.attr('id') == button){\n                var d = new Date();\n                selectstart.year = d.getFullYear();\n                selectstart.mon = d.getMonth()+1;\n                selectstart.mday = d.getDate();\n                selectend.year= d.getFullYear()+1;\n                selectend.mon= d.getMonth()+1;\n                selectend.mday= d.getDate();\n            }\n\n            self.populateDateSelects(selectstart,selectend);\n\n        // Render autocomplete for categories\n        module.enhance(\"#course_tools_category\",[],\"\",\"Search\",false,true,\"No Selection\");\n\n            //change category to that of course\n            $(SELECTORS.CATEGORY).val(selectcatergory);\n\n            self.registerDateEventListeners(_element);\n        });\n    }\n\n    /**\n    * Switch choosen template based on click in template list\n    */\n    populateDateSelects(selectstart, selectend) {\n\n        //populate start and end dates\n        var currentyear = (new Date()).getFullYear();\n        for (var year = 1900; year < currentyear+30; year++) {\n            $(SELECTORS.STARTYEAR).append('<option  value=\"'+year+'\" '\n                                + ((year == selectstart.year) ? \"selected\": \" \" ) +'>' + year + '</option>');\n            $(SELECTORS.ENDYEAR).append('<option value=\"'+year+'\"'\n                                +(((year == selectend.year && selectend.year >= selectstart.year) ||\n                                (year == currentyear && selectend.year <selectstart.year) ) ? \"selected\": \" \" )+'>'\n                                + year + '</option>');\n        }\n\n        var monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\",\n                            \"August\", \"September\", \"October\", \"November\", \"December\"];\n        var currentmonth = (new Date()).getMonth();\n        for (var month = 0; month < monthNames.length; month++) {\n              var mtemp = month;\n              mtemp++;\n              $(SELECTORS.STARTMONTH).append('<option value=\"'+mtemp+'\" '\n                                        +((mtemp == selectstart.mon) ? \"selected\": \" \" )+'>' + monthNames[month] + '</option>');\n              $(SELECTORS.ENDMONTH).append('<option value=\"'+mtemp+'\" '\n                                        +(((mtemp == selectend.mon && selectend.year >= selectstart.year) ||\n                                        (month == currentmonth && selectend.year <selectstart.year) ) ? \"selected\": \" \" )\n                                        +'>' + monthNames[month] + '</option>');\n        }\n\n        var currentday = (new Date()).getDate();\n        for (var day = 1; day < 32; day++) {\n            $(SELECTORS.STARTDAY).append('<option value=\"'+day+'\" '\n                                        +((day == selectstart.mday) ? \"selected\": \" \" )+'>' + day + '</option>');\n            $(SELECTORS.ENDDAY).append('<option value=\"'+day+'\" '\n                                        +(((day == selectend.mday && selectend.year >= selectstart.year) ||\n                                        (day == currentday && selectend.year <selectstart.year) ) ? \"selected\": \" \" )\n                                        +'>' + day + '</option>');\n        }\n\n        for (var hour = 0; hour < 24; hour++) {\n            $(SELECTORS.STARTHOUR).append('<option value=\"'+hour+'\">'\n                                            + ((hour < 10) ? \"0\"+hour: hour ) + '</option>');\n            $(SELECTORS.ENDHOUR).append('<option value=\"'+hour+'\">'\n                                        + ((hour < 10) ? \"0\"+hour: hour ) + '</option>');\n        }\n\n        for (var minute = 0; minute < 61; minute++) {\n            $(SELECTORS.STARTMINUTE).append('<option value=\"'+minute+'\"    >'\n                                            + ((minute < 10) ? \"0\"+minute: minute ) + '</option>');\n            $(SELECTORS.ENDMINUTE).append('<option  value=\"'+minute+'\"  >'\n                                            + ((minute < 10) ? \"0\"+minute: minute ) + '</option>');\n        }\n    }\n\n    /**\n    * Switch choosen template based on click in template list\n    */\n    setActiveTemplate(e) {\n\n        var templateHolder = $('div[data-role=\"templateholder\"');\n        $(templateHolder).find('.active').removeClass(\"active\");\n        e.addClass(\"active\");\n    }\n    /**\n    * Enable or disable enddate selector\n    */\n    setEnddate(e) {\n\n        var checked;\n        if(e.is(\":checked\")) {checked=false;} else{checked=true;}\n        $(SELECTORS.ENDDAY).prop(\"disabled\", checked);\n        $(SELECTORS.ENDMONTH).prop(\"disabled\", checked);\n        $(SELECTORS.ENDYEAR).prop(\"disabled\", checked);\n        $(SELECTORS.ENDHOUR).prop(\"disabled\", checked);\n        $(SELECTORS.ENDMINUTE).prop(\"disabled\", checked);\n    }\n    /**\n    * Check if selected dates are valid\n    */\n    validateDaysInMonth () {\n\n        var startyear = $(SELECTORS.STARTYEAR).val();\n        var endyear = $(SELECTORS.ENDYEAR).val();\n        var startmonth = $(SELECTORS.STARTMONTH).val();\n        var endmonth = $(SELECTORS.ENDMONTH).val();\n        var startday = $(SELECTORS.STARTDAY).val();\n        var endday = $(SELECTORS.ENDDAY).val();\n\n        var actualStart = new Date(startyear, startmonth, 0).getDate();\n        var actualEnd = new Date(endyear, endmonth, 0).getDate();\n\n        if(actualStart < startday){\n            $(SELECTORS.STARTDAY).val(actualStart);\n        }\n        if(actualEnd < endday){\n            $(SELECTORS.ENDDAY).val(actualEnd);\n        }\n    }\n\n    /**\n     * Update the modal body using given template and data.\n     *\n     * @method render\n     * @param {String} template - The name of the template to render.\n     * @param {Object} data - Data for template.\n     * @param {Object} breadcrumbData - Data required for rending breadcrumbs.\n     */\n     async render(template,templatenew,istemplatelist) {\n\n        var templatelist = [];\n        $.each(self._templatelist, function(key,val) {\n            templatelist.push({\"id\":val.id,\"fullname\":val.fullname,\"summary\":val.summary, \"courseimage\": val.courseimage});\n        });\n\n        var categories = [];\n        $.each(self._categories, function(key,val) {\n            categories.push({\"id\":val.id,\"name\":val.name});\n        });\n\n        showcategories =false;\n        if(categories.length>1){\n            showcategories=true;\n        }\n\n        const renderData = {\n            templatenew: templatenew,\n            templatelist:templatelist,\n            istemplatelist:istemplatelist,\n            categories: categories,\n            showcategories: showcategories\n        };\n        const renderPromise = await Templates.render(template, renderData);\n        return renderPromise;\n    }\n\n    /**\n     * Sets up event listeners.\n     * @return void\n     */\n     registerSelectorEventListeners (_element, button) {\n\n        if(_element.attr('id') == button){\n            //set event listners for template options\n            $('.tmpl-label').bind('click', function() { self.setActiveTemplate($(this)); } );\n            $('button[data-role=\"info_button\"').bind('click', function() { self.showMoreInfo($(this)); } );\n        }\n    }\n    /**\n     * Sets up event listeners.\n     * @return void\n     */\n     registerDateEventListeners () {\n        //set event listners for template options\n        $(SELECTORS.ENDENABLE).bind('click', function() { self.setEnddate($(this)); } );\n        $(SELECTORS.ENDMONTH).bind('blur', function() { self.validateDaysInMonth ($(this)); } );\n        $(SELECTORS.ENDDAY).bind('blur', function() { self.validateDaysInMonth ($(this)); } );\n        $(SELECTORS.STARTMONTH).bind('blur', function() { self.validateDaysInMonth ($(this)); } );\n        $(SELECTORS.STARTDAY).bind('blur', function() { self.validateDaysInMonth ($(this)); } );\n    }\n\n    /**\n     * For Duplicate and Create course.\n     * Validate if course name and shortname have been entered\n     */\n     validate() {\n\n        var coursename = $(SELECTORS.COURSENAME).val();\n        var shortname = $(SELECTORS.SHORTNAME).val();\n        var startday = $(SELECTORS.STARTDAY).val();\n        var startmonth = $(SELECTORS.STARTMONTH).val();\n        var startyear = $(SELECTORS.STARTYEAR).val();\n        var endyear = $(SELECTORS.ENDYEAR).val();\n        var endday = $(SELECTORS.ENDDAY).val();\n        var endmonth = $(SELECTORS.ENDMONTH).val();\n        var category = $(SELECTORS.CATEGORY).val();\n        var test =true;\n\n        if(coursename.length ==0){\n            $(SELECTORS.ERR_COURSENAME).text(\"Please enter a name for the course\");\n            $(SELECTORS.ERR_COURSENAME).attr(\"display\", \"block\");\n            $(SELECTORS.ERR_COURSENAME).show();\n            test = false;\n        }else{\n            $(SELECTORS.ERR_COURSENAME).text(\"\");\n        }\n\n        if(shortname.length ==0){\n            $(SELECTORS.ERR_SHORTNAME).text(\"Please enter a short name for the course\");\n            $(SELECTORS.ERR_SHORTNAME).attr(\"display\", \"block\");\n            $(SELECTORS.ERR_SHORTNAME).show();\n            test = false;\n        }else{\n            $(SELECTORS.ERR_SHORTNAME).text(\"\");\n        }\n\n        if(category ==0 || category ==\"\" ){\n            $(SELECTORS.ERR_CATEGORY).text(\"Please select a category\");\n            $(SELECTORS.ERR_CATEGORY).attr(\"display\", \"block\");\n            $(SELECTORS.ERR_CATEGORY).show();\n            test = false;\n        }else{\n            $(SELECTORS.ERR_CATEGORY).text(\"\");\n        }\n\n        var startdate = new Date(startyear+\".\"+startmonth+\".\"+startday).getTime()/1000;\n        var enddate = new Date(endyear+\".\"+endmonth+\".\"+endday).getTime()/1000;\n\n        if(enddate < startdate && $(SELECTORS.ENDENABLE).is(\":checked\") ){\n            $(SELECTORS.ERR_START).text(\"Course end date can not be before start date\");\n            $(SELECTORS.ERR_START).attr(\"display\", \"block\");\n            $(SELECTORS.ERR_START).show();\n            test = false;\n        }else{\n            $(SELECTORS.ERR_START).text(\"\");\n            $(SELECTORS.ERR_END).text(\"\");\n        }\n        return test;\n    }\n\n    /**\n     * For Template Lists, if button is clicked to show more\n     * info, create 2nd modal to pop up showing course description\n     */\n    showMoreInfo(e) {\n\n        var course =\"\";\n        $.each(self._templatelist, function(key,val) {\n            var id = e.attr('id').split(\"_\");\n            if(id[1] == val.id){\n               course = {\"id\":val.id,\"fullname\":val.fullname,\"summary\":val.summary, \"courseimage\": val.courseimage};\n            }\n        });\n        ModalFactory.create({\n            type: ModalFactory.types.DEFAULT,\n            title: course.fullname,\n            body: course.summary\n        }).then(function(modal) {\n            modal.show();\n        });\n    }\n\n    /**\n     * After modal info has been entered call ajax request\n     */\n    createCourse() {\n        // return if required values aren't set\n        if (!self._courseid) {\n            return;\n        }\n\n        var templateHolder = $('div[data-role=\"templateholder\"');\n        var selectedTemplate = $(templateHolder).find('.active');\n        var templateid = $(selectedTemplate).attr('id');\n        var coursename = $(SELECTORS.COURSENAME).val();\n        var shortname = $(SELECTORS.SHORTNAME).val();\n        var category = $(SELECTORS.CATEGORY).val();\n        var startday = $(SELECTORS.STARTDAY).val();\n        var startmonth = $(SELECTORS.STARTMONTH).val();\n        var startyear = $(SELECTORS.STARTYEAR).val();\n        var starthour = $(SELECTORS.STARTHOUR).val();\n        var startminute = $(SELECTORS.STARTMINUTE).val();\n        var startdate = startday+\"-\"+startmonth+\"-\"+startyear+\"-\"+starthour+\"-\"+startminute;\n        var enddate = \"0\";\n\n        if($(SELECTORS.ENDENABLE).is(\":checked\") ){\n            var endday = $(SELECTORS.ENDDAY).val();\n            var endmonth= $(SELECTORS.ENDMONTH).val();\n            var endyear = $(SELECTORS.ENDYEAR).val();\n            var endhour = $(SELECTORS.ENDHOUR).val();\n            var endminute = $(SELECTORS.ENDMINUTE).val();\n            enddate = endday+\"-\"+endmonth+\"-\"+endyear+\"-\"+endhour+\"-\"+endminute;\n        }\n\n        self.spinnerCheck(\"show\");\n\n        //duplicate course option selected\n        // set args\n        var args = {\n            courseid: self._courseid,\n            templateid: templateid,\n            coursename: coursename,\n            shortname: shortname,\n            categoryid: category,\n            startdate: startdate,\n            enddate: enddate,\n        };\n\n        // set ajax call\n        var ajaxCall = {\n            methodname: 'theme_urcourses_default_header_create_course',\n            args: args,\n            fail: notification.exception\n        };\n\n        // initiate ajax call\n        var promise = ajax.call([ajaxCall]);\n        promise[0].done(function(response) {\n            self.spinnerCheck(\"hide\");\n\n            if(response.error!=\"\"){\n\n                var title = \"ERROR:\";\n                var info = response.error;\n\n                ModalFactory.create({\n                    title: title,\n                    body: '<p><b>'+info+'</b><br></p>',\n                })\n                .done(function(modal) {\n                    modal.show();\n                });\n            }\n            //ADD REDIRECT TO NEW COURSE USING NEW ID\n            if(response.url !=\"\"){\n                window.location.href = response.url;\n            }\n        }).fail(function() {\n            self.spinnerCheck(\"hide\");\n        });\n    }\n\n     /**\n     * After modal info has been entered call ajax request\n     */\n      duplicateCourse() {\n        // return if required values aren't set\n        if (!self._courseid) {\n            return;\n        }\n        var coursename = $(SELECTORS.COURSENAME).val();\n        var shortname = $(SELECTORS.SHORTNAME).val();\n        var category = $(SELECTORS.CATEGORY).val();\n\n        var startday = $(SELECTORS.STARTDAY).val();\n        var startmonth = $(SELECTORS.STARTMONTH).val();\n        var startyear = $(SELECTORS.STARTYEAR).val();\n        var starthour = $(SELECTORS.STARTHOUR).val();\n        var startminute = $(SELECTORS.STARTMINUTE).val();\n        var startdate = startday+\"-\"+startmonth+\"-\"+startyear+\"-\"+starthour+\"-\"+startminute;\n\n        var enddate = \"0\";\n        if($(SELECTORS.ENDENABLE).is(\":checked\") ){\n            var endday = $(SELECTORS.ENDDAY).val();\n            var endmonth= $(SELECTORS.ENDMONTH).val();\n            var endyear = $(SELECTORS.ENDYEAR).val();\n            var endhour = $(SELECTORS.ENDHOUR).val();\n            var endminute = $(SELECTORS.ENDMINUTE).val();\n            enddate = endday+\"-\"+endmonth+\"-\"+endyear+\"-\"+endhour+\"-\"+endminute;\n        }\n\n        self.spinnerCheck(\"show\");\n\n        //duplicate course option selected\n        // set args\n        var args = {\n            courseid: self._courseid,\n            coursename: coursename,\n            shortname: shortname,\n            categoryid: category,\n            startdate: startdate,\n            enddate: enddate,\n        };\n\n        // set ajax call\n        var ajaxCall = {\n            methodname: 'theme_urcourses_default_header_duplicate_course',\n            args: args,\n            fail: notification.exception\n        };\n\n        // initiate ajax call\n        var promise = ajax.call([ajaxCall]);\n        promise[0].done(function(response) {\n            self.spinnerCheck(\"hide\");\n            if(response.error!=\"\"){\n\n                var title = \"Notice:\";\n                if(response.user == \"\"){\n                    var info = '<p><b>'+response.error +'</b><br></p>';\n                }else{\n                    var info = '<div class=\"alert alert-warning\" role=\"alert\">'\n                            +response.error\n                            +\"<b>\"+response.user+\".</b>\"\n                            +'</div>';\n                }\n\n                ModalFactory.create({\n                    title: title,\n                    body: info,\n                })\n                .done(function(modal) {\n                    modal.show();\n                });\n            }\n            //ADD REDIRECT TO NEW COURSE USING NEW ID\n            if(response.url !=\"\"){\n                 window.location.href = response.url;\n            }\n        }).fail(function() {\n            self.spinnerCheck(\"hide\");\n        });\n    }\n\n    /**\n    * Used mainly for enrolment spinners, start loading and stops\n    */\n    spinnerCheck(type) {\n\n        if($('#mainspinner').length){\n            if(type == \"hide\"){\n                $('#mainspinner') .hide();\n                $('#infoholder').removeClass(\"block_urcourserequest_overlay\");\n            }else{\n                $('#mainspinner') .show();\n                $('#infoholder').addClass(\"block_urcourserequest_overlay\");\n            }\n        }\n    }\n}"],"names":["TEMPLATES","SELECTORS","courseActionsLib","courseid","coursename","shortname","startdate","enddate","templatelist","categories","self","this","_courseid","_coursename","_shortname","_startdate","_enddate","_templatelist","_categories","_element","button","selectcatergory","selectstart","selectend","modaltitle","attr","modalaction","templatenew","istemplatelist","length","render","template","create","type","ModalFactory","types","SAVE_CANCEL","title","body","then","modal","setSaveButtonText","root","getRoot","on","ModalEvents","cancel","save","e","preventDefault","validate","createCourse","duplicateCourse","hidden","remove","show","done","registerSelectorEventListeners","val","d","Date","year","getFullYear","mon","getMonth","mday","getDate","populateDateSelects","enhance","registerDateEventListeners","currentyear","append","monthNames","currentmonth","month","mtemp","currentday","day","hour","minute","templateHolder","find","removeClass","addClass","checked","is","prop","startyear","endyear","startmonth","endmonth","startday","endday","actualStart","actualEnd","each","key","push","id","fullname","summary","courseimage","name","showcategories","renderData","Templates","renderPromise","bind","setActiveTemplate","showMoreInfo","setEnddate","validateDaysInMonth","category","test","text","getTime","course","split","DEFAULT","selectedTemplate","templateid","spinnerCheck","ajaxCall","methodname","args","categoryid","fail","notification","exception","ajax","call","response","error","info","url","window","location","href","user","hide"],"mappings":"gmDAkCMA,sCAC2B,sDAG3BC,qBACU,2BADVA,oBAES,0BAFTA,mBAGQ,yBAHRA,sBAIW,8BAJXA,mBAKQ,0BALRA,qBAMU,4BANVA,oBAOS,2BAPTA,oBAQS,2BARTA,sBASW,6BATXA,iBAUM,wBAVNA,mBAWQ,0BAXRA,kBAYO,yBAZPA,kBAaO,yBAbPA,oBAcS,2BAdTA,oBAeS,gCAfTA,yBAgBc,iCAhBdA,wBAiBa,gCAjBbA,uBAkBY,+BAlBZA,oBAmBS,4BAnBTA,kBAoBO,0BAGQC,sDAULC,SAASC,WAAYC,UAAWC,UAAWC,QAASC,aAAcC,mKAE1EC,KAAOC,KACPD,KAAKE,UAAYT,SACjBO,KAAKG,YAAcT,WACnBM,KAAKI,WAAaT,UAClBK,KAAKK,WAAaT,UAClBI,KAAKM,SAAWT,QAChBG,KAAKO,cAAgBT,aACrBE,KAAKQ,YAAcT,qNAMvB,iBAAsBU,SAASC,OAAOC,gBAAiBC,YAAaC,sLAC5DC,WAAcL,SAASM,KAAK,OAASL,OAAU,oBAAsB,wBACrEM,YAAeP,SAASM,KAAK,OAASL,OAAU,eAAiB,iBACjEO,YAAeR,SAASM,KAAK,OAASL,QAAiB,GACvDQ,eAAkBlB,KAAKO,cAAcY,OAAO,GAAY,mBACtCnB,KAAKoB,OAAO9B,sCAAuC2B,YAAYC,uBAAjFG,8CAISC,OAAO,CAChBC,KAAMC,uBAAaC,MAAMC,YACzBC,MAAOb,WACPc,KAAM,kCAAmCZ,YAAa,sBAC9CP,SAASM,KAAK,OAASL,OAAU,4EACC,8EACpCW,SACA,SACPQ,MAAK,SAASC,OAEbA,MAAMC,kBAAmBtB,SAASM,KAAK,OAASL,OAAU,oBAAsB,6BAC5EsB,KAAOF,MAAMG,UACjBD,KAAKE,GAAGC,sBAAYC,QAAQ,eAI5BJ,KAAKE,GAAGC,sBAAYE,MAAM,SAASC,MAC/BA,EAAEC,iBACCvC,KAAKwC,kBACA/B,SAASM,KAAK,OAASL,YACvBV,KAAKyC,oBAGLzC,KAAK0C,qBAMjBV,KAAKE,GAAGC,sBAAYQ,QAAQ,+BAEtBpD,uBAAuBqD,YAG7Bd,MAAMe,UACPC,MAAK,cACArC,SAASM,KAAK,OAASL,OACvBV,KAAK+C,+BAA+BtC,SAAUC,6BAE3CnB,sBAAsByD,IAAIhD,KAAKG,YAAY,+BAC3CZ,qBAAqByD,IAAIhD,KAAKI,WAAW,YAI7CK,SAASM,KAAK,OAASL,OAAO,KACzBuC,EAAI,IAAIC,KACZtC,YAAYuC,KAAOF,EAAEG,cACrBxC,YAAYyC,IAAMJ,EAAEK,WAAW,EAC/B1C,YAAY2C,KAAON,EAAEO,UACrB3C,UAAUsC,KAAMF,EAAEG,cAAc,EAChCvC,UAAUwC,IAAKJ,EAAEK,WAAW,EAC5BzC,UAAU0C,KAAMN,EAAEO,UAGtBxD,KAAKyD,oBAAoB7C,YAAYC,qCAGlC6C,QAAQ,yBAAyB,GAAG,GAAG,UAAS,GAAM,EAAK,oCAG5DnE,oBAAoByD,IAAIrC,iBAE1BX,KAAK2D,2BAA2BlD,oLAOxC,SAAoBG,YAAaC,mBAGzB+C,aAAe,IAAIV,MAAQE,cACtBD,KAAO,KAAMA,KAAOS,YAAY,GAAIT,2BACvC5D,qBAAqBsE,OAAO,mBAAmBV,KAAK,MAC9BA,MAAQvC,YAAYuC,KAAQ,WAAY,KAAO,IAAMA,KAAO,iCAClF5D,mBAAmBsE,OAAO,kBAAkBV,KAAK,KAC3BA,MAAQtC,UAAUsC,MAAQtC,UAAUsC,MAAQvC,YAAYuC,MAC3DA,MAAQS,aAAe/C,UAAUsC,KAAMvC,YAAYuC,KAAU,WAAY,KAAM,IAC9EA,KAAO,qBAG7BW,WAAa,CAAC,UAAW,WAAY,QAAS,QAAS,MAAO,OAAQ,OACtD,SAAU,YAAa,UAAW,WAAY,YAC9DC,cAAgB,IAAIb,MAAQI,WACvBU,MAAQ,EAAGA,MAAQF,WAAW3C,OAAQ6C,QAAS,KAC9CC,MAAQD,MACZC,4BACE1E,sBAAsBsE,OAAO,kBAAkBI,MAAM,MAC1BA,OAASrD,YAAYyC,IAAO,WAAY,KAAM,IAAMS,WAAWE,OAAS,iCACnGzE,oBAAoBsE,OAAO,kBAAkBI,MAAM,MACvBA,OAASpD,UAAUwC,KAAOxC,UAAUsC,MAAQvC,YAAYuC,MAC3Da,OAASD,cAAgBlD,UAAUsC,KAAMvC,YAAYuC,KAAU,WAAY,KAC3E,IAAMW,WAAWE,OAAS,qBAGvDE,YAAc,IAAIhB,MAAQM,UACrBW,IAAM,EAAGA,IAAM,GAAIA,0BACtB5E,oBAAoBsE,OAAO,kBAAkBM,IAAI,MACpBA,KAAOvD,YAAY2C,KAAQ,WAAY,KAAM,IAAMY,IAAM,iCACtF5E,kBAAkBsE,OAAO,kBAAkBM,IAAI,MACjBA,KAAOtD,UAAU0C,MAAQ1C,UAAUsC,MAAQvC,YAAYuC,MAC1DgB,KAAOD,YAAcrD,UAAUsC,KAAMvC,YAAYuC,KAAU,WAAY,KACvE,IAAMgB,IAAM,iBAGxC,IAAIC,KAAO,EAAGA,KAAO,GAAIA,2BACxB7E,qBAAqBsE,OAAO,kBAAkBO,KAAK,MACjBA,KAAO,GAAM,IAAIA,KAAMA,MAAS,iCAClE7E,mBAAmBsE,OAAO,kBAAkBO,KAAK,MACnBA,KAAO,GAAM,IAAIA,KAAMA,MAAS,iBAG/D,IAAIC,OAAS,EAAGA,OAAS,GAAIA,6BAC5B9E,uBAAuBsE,OAAO,kBAAkBQ,OAAO,UACrBA,OAAS,GAAM,IAAIA,OAAQA,QAAW,iCACxE9E,qBAAqBsE,OAAO,mBAAmBQ,OAAO,QACpBA,OAAS,GAAM,IAAIA,OAAQA,QAAW,8CAOlF,SAAkB/B,OAEVgC,gBAAiB,mBAAE,sDACrBA,gBAAgBC,KAAK,WAAWC,YAAY,UAC9ClC,EAAEmC,SAAS,oCAKf,SAAWnC,OAEHoC,QACkBA,SAAnBpC,EAAEqC,GAAG,gCACNpF,kBAAkBqF,KAAK,WAAYF,6BACnCnF,oBAAoBqF,KAAK,WAAYF,6BACrCnF,mBAAmBqF,KAAK,WAAYF,6BACpCnF,mBAAmBqF,KAAK,WAAYF,6BACpCnF,qBAAqBqF,KAAK,WAAYF,4CAK5C,eAEQG,WAAY,mBAAEtF,qBAAqByD,MACnC8B,SAAU,mBAAEvF,mBAAmByD,MAC/B+B,YAAa,mBAAExF,sBAAsByD,MACrCgC,UAAW,mBAAEzF,oBAAoByD,MACjCiC,UAAW,mBAAE1F,oBAAoByD,MACjCkC,QAAS,mBAAE3F,kBAAkByD,MAE7BmC,YAAc,IAAIjC,KAAK2B,UAAWE,WAAY,GAAGvB,UACjD4B,UAAY,IAAIlC,KAAK4B,QAASE,SAAU,GAAGxB,UAE5C2B,YAAcF,8BACX1F,oBAAoByD,IAAImC,aAE3BC,UAAYF,4BACT3F,kBAAkByD,IAAIoC,qFAY/B,kBAAa/D,SAASJ,YAAYC,oLAE3BpB,aAAe,mBACjBuF,KAAKrF,KAAKO,eAAe,SAAS+E,IAAItC,KACpClD,aAAayF,KAAK,IAAMvC,IAAIwC,YAAcxC,IAAIyC,iBAAmBzC,IAAI0C,oBAAwB1C,IAAI2C,iBAGjG5F,WAAa,mBACfsF,KAAKrF,KAAKQ,aAAa,SAAS8E,IAAItC,KAClCjD,WAAWwF,KAAK,IAAMvC,IAAIwC,QAAUxC,IAAI4C,UAG5CC,gBAAgB,EACb9F,WAAWoB,OAAO,IACjB0E,gBAAe,GAGbC,WAAa,CACf7E,YAAaA,YACbnB,aAAaA,aACboB,eAAeA,eACfnB,WAAYA,WACZ8F,eAAgBA,iCAEQE,mBAAU3E,OAAOC,SAAUyE,0BAAjDE,uDACCA,oLAOV,SAAgCvF,SAAUC,QAEpCD,SAASM,KAAK,OAASL,6BAEpB,eAAeuF,KAAK,SAAS,WAAajG,KAAKkG,mBAAkB,mBAAEjG,8BACnE,kCAAkCgG,KAAK,SAAS,WAAajG,KAAKmG,cAAa,mBAAElG,qDAO1F,+BAEKV,qBAAqB0G,KAAK,SAAS,WAAajG,KAAKoG,YAAW,mBAAEnG,8BAClEV,oBAAoB0G,KAAK,QAAQ,WAAajG,KAAKqG,qBAAqB,mBAAEpG,8BAC1EV,kBAAkB0G,KAAK,QAAQ,WAAajG,KAAKqG,qBAAqB,mBAAEpG,8BACxEV,sBAAsB0G,KAAK,QAAQ,WAAajG,KAAKqG,qBAAqB,mBAAEpG,8BAC5EV,oBAAoB0G,KAAK,QAAQ,WAAajG,KAAKqG,qBAAqB,mBAAEpG,kCAO/E,eAEOP,YAAa,mBAAEH,sBAAsByD,MACrCrD,WAAY,mBAAEJ,qBAAqByD,MACnCiC,UAAW,mBAAE1F,oBAAoByD,MACjC+B,YAAa,mBAAExF,sBAAsByD,MACrC6B,WAAY,mBAAEtF,qBAAqByD,MACnC8B,SAAU,mBAAEvF,mBAAmByD,MAC/BkC,QAAS,mBAAE3F,kBAAkByD,MAC7BgC,UAAW,mBAAEzF,oBAAoByD,MACjCsD,UAAW,mBAAE/G,oBAAoByD,MACjCuD,MAAM,EAEa,GAApB7G,WAAWyB,4BACR5B,0BAA0BiH,KAAK,0DAC/BjH,0BAA0BwB,KAAK,UAAW,6BAC1CxB,0BAA0BsD,OAC5B0D,MAAO,uBAELhH,0BAA0BiH,KAAK,IAGf,GAAnB7G,UAAUwB,4BACP5B,yBAAyBiH,KAAK,gEAC9BjH,yBAAyBwB,KAAK,UAAW,6BACzCxB,yBAAyBsD,OAC3B0D,MAAO,uBAELhH,yBAAyBiH,KAAK,IAGtB,GAAXF,UAA2B,IAAXA,8BACb/G,wBAAwBiH,KAAK,gDAC7BjH,wBAAwBwB,KAAK,UAAW,6BACxCxB,wBAAwBsD,OAC1B0D,MAAO,uBAELhH,wBAAwBiH,KAAK,QAG/B5G,UAAY,IAAIsD,KAAK2B,UAAU,IAAIE,WAAW,IAAIE,UAAUwB,UAAU,WAC5D,IAAIvD,KAAK4B,QAAQ,IAAIE,SAAS,IAAIE,QAAQuB,UAAU,IAErD7G,YAAa,mBAAEL,qBAAqBoF,GAAG,iCAC9CpF,qBAAqBiH,KAAK,oEAC1BjH,qBAAqBwB,KAAK,UAAW,6BACrCxB,qBAAqBsD,OACvB0D,MAAO,wBAELhH,qBAAqBiH,KAAK,wBAC1BjH,mBAAmBiH,KAAK,KAEvBD,iCAOX,SAAajE,OAELoE,OAAQ,mBACVrB,KAAKrF,KAAKO,eAAe,SAAS+E,IAAItC,KAC3BV,EAAEvB,KAAK,MAAM4F,MAAM,KACtB,IAAM3D,IAAIwC,KACbkB,OAAS,IAAM1D,IAAIwC,YAAcxC,IAAIyC,iBAAmBzC,IAAI0C,oBAAwB1C,IAAI2C,wCAGlFrE,OAAO,CAChBC,KAAMC,uBAAaC,MAAMmF,QACzBjF,MAAO+E,OAAOjB,SACd7D,KAAM8E,OAAOhB,UACd7D,MAAK,SAASC,OACbA,MAAMe,sCAOd,cAES7C,KAAKE,eAINoE,gBAAiB,mBAAE,kCACnBuC,kBAAmB,mBAAEvC,gBAAgBC,KAAK,WAC1CuC,YAAa,mBAAED,kBAAkB9F,KAAK,MACtCrB,YAAa,mBAAEH,sBAAsByD,MACrCrD,WAAY,mBAAEJ,qBAAqByD,MACnCsD,UAAW,mBAAE/G,oBAAoByD,MAMjCpD,WALW,mBAAEL,oBAAoByD,MAKZ,KAJR,mBAAEzD,sBAAsByD,MAID,KAHxB,mBAAEzD,qBAAqByD,MAGe,KAFtC,mBAAEzD,qBAAqByD,MAE6B,KADlD,mBAAEzD,uBAAuByD,MAEvCnD,QAAU,KAEX,mBAAEN,qBAAqBoF,GAAG,cAMzB9E,SALa,mBAAEN,kBAAkByD,MAKhB,KAJH,mBAAEzD,oBAAoByD,MAIN,KAHhB,mBAAEzD,mBAAmByD,MAGO,KAF5B,mBAAEzD,mBAAmByD,MAEmB,KADtC,mBAAEzD,qBAAqByD,OAI3ChD,KAAK+G,aAAa,YAedC,SAAW,CACXC,WAAY,+CACZC,KAbO,CACPzH,SAAUO,KAAKE,UACf4G,WAAYA,WACZpH,WAAYA,WACZC,UAAWA,UACXwH,WAAYb,SACZ1G,UAAWA,UACXC,QAASA,SAOTuH,KAAMC,sBAAaC,WAITC,cAAKC,KAAK,CAACR,WACjB,GAAGlE,MAAK,SAAS2E,aACrBzH,KAAK+G,aAAa,QAEC,IAAhBU,SAASC,MAAU,KAGdC,KAAOF,SAASC,6BAEPpG,OAAO,CAChBK,MAJQ,SAKRC,KAAM,SAAS+F,KAAK,iBAEvB7E,MAAK,SAAShB,OACXA,MAAMe,UAII,IAAf4E,SAASG,MACRC,OAAOC,SAASC,KAAON,SAASG,QAErCR,MAAK,WACJpH,KAAK+G,aAAa,2CAOxB,cAEO/G,KAAKE,eAGNR,YAAa,mBAAEH,sBAAsByD,MACrCrD,WAAY,mBAAEJ,qBAAqByD,MACnCsD,UAAW,mBAAE/G,oBAAoByD,MAOjCpD,WALW,mBAAEL,oBAAoByD,MAKZ,KAJR,mBAAEzD,sBAAsByD,MAID,KAHxB,mBAAEzD,qBAAqByD,MAGe,KAFtC,mBAAEzD,qBAAqByD,MAE6B,KADlD,mBAAEzD,uBAAuByD,MAGvCnD,QAAU,KACX,mBAAEN,qBAAqBoF,GAAG,cAMzB9E,SALa,mBAAEN,kBAAkByD,MAKhB,KAJH,mBAAEzD,oBAAoByD,MAIN,KAHhB,mBAAEzD,mBAAmByD,MAGO,KAF5B,mBAAEzD,mBAAmByD,MAEmB,KADtC,mBAAEzD,qBAAqByD,OAI3ChD,KAAK+G,aAAa,YAcdC,SAAW,CACXC,WAAY,kDACZC,KAZO,CACPzH,SAAUO,KAAKE,UACfR,WAAYA,WACZC,UAAWA,UACXwH,WAAYb,SACZ1G,UAAWA,UACXC,QAASA,SAOTuH,KAAMC,sBAAaC,WAITC,cAAKC,KAAK,CAACR,WACjB,GAAGlE,MAAK,SAAS2E,aACrBzH,KAAK+G,aAAa,QACC,IAAhBU,SAASC,MAAU,IAGE,IAAjBD,SAASO,SACJL,KAAO,SAASF,SAASC,MAAO,oBAEhCC,KAAO,iDACFF,SAASC,MACT,MAAMD,SAASO,KAFb,qCAMF1G,OAAO,CAChBK,MAXQ,UAYRC,KAAM+F,OAET7E,MAAK,SAAShB,OACXA,MAAMe,UAII,IAAf4E,SAASG,MACPC,OAAOC,SAASC,KAAON,SAASG,QAEtCR,MAAK,WACJpH,KAAK+G,aAAa,wCAO1B,SAAaxF,OAEN,mBAAE,gBAAgBJ,SACN,QAARI,0BACG,gBAAiB0G,2BACjB,eAAezD,YAAY,uDAE3B,gBAAiB3B,2BACjB,eAAe4B,SAAS"}