define("theme_urcourses_default/toggle_course_availability",["jquery","core/ajax","core/notification","core/str","core/modal_factory","core/modal_events"],(function($,ajax,notification,str,ModalFactory,ModalEvents){var _root,_courseid,_availability,SELECTORS_HEADER_TOP="#page-header .page-head",SELECTORS_HDRMAKEAVAIL_BTN="#avail_btn",_toggleAvailability=function(){ModalFactory.create({type:ModalFactory.types.SAVE_CANCEL,title:"<b>Make this course "+(1==_availability?"un":"")+"available?</b>",body:"<p>Are you sure you want to make this course <b>"+(1==_availability?"un":"")+'available</b> to students?</b><br /><span class="small">You can change the availability of this course as needed, when you\'re ready.</span></p>'}).then((function(modal){modal.setSaveButtonText("Yes, make it "+(1==_availability?"un":"")+"available");var root=modal.getRoot();root.on(ModalEvents.cancel,(function(){})),root.on(ModalEvents.save,_availabilityChange),modal.show()}))},_availabilityChange=function(){if(_courseid){var ajaxCall={methodname:"theme_urcourses_default_toggle_course_availability",args:{courseid:_courseid,availability:_availability},done:_choiceDone,fail:notification.exception};ajax.call([ajaxCall])}},_choiceDone=function(){str.get_string("success:courseavailabilitychanged","theme_urcourses_default").done(_createSuccessPopup)},_createSuccessPopup=function(text){var popup=$("<div></div>");popup.text(text),popup.prop("id","cstyle_success_popup"),popup.css({position:"absolute"}),popup.css({right:"5px"}),popup.css({bottom:"30px"}),popup.css({"z-index":"1200"}),popup.addClass("alert alert-success alert-dismissable fade show");var dismissBtn=$("<button></button>");dismissBtn.html("&times;"),dismissBtn.addClass("close"),dismissBtn.attr("type","button"),dismissBtn.attr("data-dismiss","alert"),popup.append(dismissBtn),$(SELECTORS_HEADER_TOP).append(popup);var relopopup=$("<div></div>");relopopup.text("Loading"),relopopup.prop("id","cstyle_success_popup"),relopopup.css({position:"absolute"}),relopopup.css({right:"5px"}),relopopup.css({bottom:"30px"}),relopopup.css({"z-index":"1200"}),relopopup.addClass("alert alert-success alert-dismissable fade show");var relodismissBtn=$("<button></button>");relodismissBtn.html("&times;"),relodismissBtn.addClass("close"),relodismissBtn.attr("type","button"),relodismissBtn.attr("data-dismiss","alert"),relopopup.append(relodismissBtn),setTimeout((function(){$("#cstyle_success_popup").fadeTo(500,0).slideUp(500,(function(){$(this).remove(),$(SELECTORS_HEADER_TOP).append(relopopup),location.reload(!0)}))}),1800)};return{init:function(root,courseid,availability){!function(root,courseid,availability){_root=$(root),_courseid=courseid,_availability=availability}(root,courseid,availability),_root.on("click",SELECTORS_HDRMAKEAVAIL_BTN,_toggleAvailability)}}}));

//# sourceMappingURL=toggle_course_availability.min.js.map